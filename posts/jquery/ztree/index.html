<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ZTree | HyoSeung IT blog</title><meta name=keywords content="JavaScript,jQuery,Data Structure"><meta name=description content="💡 공통 개발을 하며 개선 건이 생겼다! 기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..! 아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!! 하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다! 기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자.. Z Tree 정의 zTree is an advanced jQuery &rsquo;tree plug-in&rsquo;."><meta name=author content="HyoSeung Jeon"><link rel=canonical href=https://HyoseungJeon.github.io/posts/jquery/ztree/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://HyoseungJeon.github.io/profile.png><link rel=icon type=image/png sizes=16x16 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><script defer crossorigin=anonymous src=/js/pro.sidebar.js></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="ZTree"><meta property="og:description" content="💡 공통 개발을 하며 개선 건이 생겼다! 기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..! 아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!! 하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다! 기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자.. Z Tree 정의 zTree is an advanced jQuery &rsquo;tree plug-in&rsquo;."><meta property="og:type" content="article"><meta property="og:url" content="https://HyoseungJeon.github.io/posts/jquery/ztree/"><meta property="og:image" content="https://HyoseungJeon.github.io/profile.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-31T14:07:43+09:00"><meta property="article:modified_time" content="2023-10-31T14:07:43+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://HyoseungJeon.github.io/profile.png"><meta name=twitter:title content="ZTree"><meta name=twitter:description content="💡 공통 개발을 하며 개선 건이 생겼다! 기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..! 아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!! 하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다! 기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자.. Z Tree 정의 zTree is an advanced jQuery &rsquo;tree plug-in&rsquo;."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://HyoseungJeon.github.io/posts/"},{"@type":"ListItem","position":2,"name":"JQuery","item":"https://HyoseungJeon.github.io/posts/jquery/"},{"@type":"ListItem","position":3,"name":"ZTree","item":"https://HyoseungJeon.github.io/posts/jquery/ztree/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ZTree","name":"ZTree","description":"💡 공통 개발을 하며 개선 건이 생겼다! 기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..! 아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!! 하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다! 기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자.. Z Tree 정의 zTree is an advanced jQuery \u0026rsquo;tree plug-in\u0026rsquo;.","keywords":["JavaScript","jQuery","Data Structure"],"articleBody":" 💡 공통 개발을 하며 개선 건이 생겼다! 기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..! 아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!! 하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다! 기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자.. Z Tree 정의 zTree is an advanced jQuery ’tree plug-in’. The performance is excellent, it is easy to configurw (with a full set of options), and has many advanced features (that usually only come with paid software). zTree is open source and uses the MIT license. 출처 - https://www.treejs.cn/v3/main.php#_zTreeInfo\nzTree는 jQuery spec을 이용한 tree 자료구조를 노출, 관리하기 위한 plug-in 이다! 유료버전도 있다고 하는데.. 우선 현재 프로젝트에서는 유료버전 라이센스를 사용하지는 않고 오픈 소스 기준으로 작업이 되있는 것 같다!\n세부 기능 다양한 브라우저와 호환 가능 (IE, FireFox, Chrome, Opera, Safari) JSON Data 지원 checkBox, radio Btn 기능 지원 이 외에도 다양한 Custom 기능이나 지연 로딩 등 성능적인 부분에서도 다양한 기능들이 지원된다!\n예제 DEMO \u003cHEAD\u003e \u003cTITLE\u003e ZTREE DEMO - Simple Data\u003c/TITLE\u003e \u003cmeta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\"\u003e \u003clink rel=\"stylesheet\" href=\"../../../css/demo.css\" type=\"text/css\"\u003e \u003clink rel=\"stylesheet\" href=\"../../../css/zTreeStyle/zTreeStyle.css\" type=\"text/css\"\u003e \u003cscript type=\"text/javascript\" src=\"../../../js/jquery-1.4.4.min.js\"\u003e\u003c/script\u003e \u003cscript type=\"text/javascript\" src=\"../../../js/jquery.ztree.core-3.5.js\"\u003e\u003c/script\u003e \u003cSCRIPT type=\"text/javascript\"\u003e \u003c/SCRIPT\u003e \u003c/HEAD\u003e \u003cBODY\u003e \u003ch1\u003eSimple JSON Data\u003c/h1\u003e \u003ch6\u003e[ File Path: core/simpleData.html ]\u003c/h6\u003e \u003cdiv class=\"content_wrap\"\u003e \u003cdiv class=\"zTreeDemoBackground left\"\u003e \u003cul id=\"treeDemo\" class=\"ztree\"\u003e\u003c/ul\u003e \u003c/div\u003e 사용법은 간단하다. JQuery, z-tree Lib를 import 해주고 ztree field에 mapping에 init 후 여러가지 custom 방식들을 활용하여 나만의 zTree를 구성하면 된다!\n자세한 기능들은 https://www.treejs.cn/v3/demo.php#_101 Demo Guide site를 참고하면 된다. 대부분 tree 구조에서 활용되는 case들이 많이 있다! 따로 유료 버전을 사용하지 않아도 충분히 제 기능을 다 한다.\n내 소스 data: { simpleData: { enable: true, idKey: 'id', pIdKey: 'pId', rootPId: null, lvl: 'lvl', caloUrl: null, menuId: null }, }, ===== 생략 ===== let iconSkin = \"\" if (testCd === '20') { iconSkin = 'ico_docu ' } ======== 생략 ====== if(key.keyCode === 13) { const treeObj = $.fn.zTree.getZTreeObj(\"tree\"); const text = $('#snb_treebox-search-input-field').val() if (!treeObj) { alert(\"업무그룹코드를 선택해주세요.\") return } if(!text){ alert(\"검색어를 입력해주세요.\") return } /* 1. 원본 검색어가 없거나, 새로운 검색어일 경우 */ if (!orgSchText || orgSchText !== text) { orgSchText = text reSchFlag = false; } else { reSchFlag = true; } /* 2. Node List 검색 */ if (reSchFlag) { schMenuIndex = schMenuIndex \u003c schMenuList.length - 1 ? schMenuIndex + 1 : 0; } else { schMenuIndex = 0; /* 2.1 List setting */ schMenuList = treeObj.getNodesByFilter(node =\u003e { return node.name.indexOf(text) \u003e -1 }); } /* 3. 현재 index Node 노출 */ treeObj.selectNode(schMenuList[schMenuIndex]); } ====== 생략 ===== checked: useYn === \"Y\", checkedOld: useYn === \"Y\", 사실 특별히 추가한 코드는 없다! 그래도 한번 짚어갈 부분을 확인해보자!\n기본적으로 Node 객체를 활용하여 tree를 구성하게 된다! 하여 node에 내부 Data를 Custom하고 해당 속성 값들을 활용하여 목적에 맞게 Tree를 구성할 수 있다는 것이 큰 장점이다! 보일 지 모르겠지만 iconSkin 값을 'ico_docu ' 띄어쓰기를 포함해 넣었다! 왜냐하면 기본적인 zTree 동작으로 leaf Node들은 iconSkin 값을 그대로 class에 선언하여 사용하지만 그 외 Node들은 해당 값을 prefix 방식으로 적용하여 open, close suffix를 붙여 class를 적용한다! 하여 만약 사용자가 open, close 형태의 icon이 아닌 정적인 형태의 icon을 활용 할 경우에는 애매했다! 하여 class가 선언되는 방식을 이용, space 공간을 추가하여 class를 분리하고 의도한 skin이 나오도록 설정하였다! Tree에 검색 기능을 추가 했는데, 여러 건이 검색 될 경우 List에 검색 결과 Node들을 담고 차례대로 순환 구조로 select 되게 구현하였다! zTree는 단순하게 Lib 하나를 더 loading 것 만으로도 CheckBox Custom이 가능했다! check 값들을 계산하거나, level 단의 checkBox 동작 같은 경우에도 간단하게 구현되었다. 너무 편하네.. 내 생각 오픈 소스 라이브러리 임에도 불구하고 굉장히 탄탄하게 구현이 되있는 것 같았다! Grid 관련한 라이브러리는 유료, 무료 모두 사용해보았지만, 유료 임에도 불친절하고 기본적인 기능도 구현되있지 않은 것들도 있었고, 무료임에도 세세한 기능과 유연한 Custom 기능까지 있는 것이 있었다! Tree 구조 관련한 Lib는 이번에 처음 사용해보았는데 첫 경험은 아주 좋았던 것 같다!! 무언가 이런 기능은 있겠지..? 하고 Docs를 살펴보면 대부분의 기능이 있었다!! 뭐 당연할 수도 있지만.. 불친절한 Lib를 사용했던 경험이 많다 보니 더 그렇게 느껴진 것 같기도 하다! 그래도 해당 lib가 굉장히 친절하고 Docs도 잘 나와 있다고 느꼈다!\n오히려 이번엔 해당 tree를 뿌리기 위해 Query를 개선 했던 것이 더 기억에 남는다..! 나중에 Posting을 할 수도 있겠지만, Query vs Java에 문제는 항상 나를 고민하게 만드는 것 같다.. 기존 menu 권한을 조회하는 Query는 시간이 5초 가량 걸리고 있었다.. 하지만 여러 Table이 엮여있고, 또 기존에 사용되던 것이 있어 함부로 개선하기도 조금 무서웠다.. 하여 조건 만 추가하여 기존 소스를 살렸다! 나중에 zTree에서 Lazy loading 기능을 활용하여.. 화면 속도를 더 개선하는 방향으로 조금 작업 해봐야겠다.. 생각보다 일이 잘 풀려서 놀랐던 ZTree에게 감사를..!!😁😁👍\n출처\nHome [zTree – jQuery tree plug-ins.]\n","wordCount":"875","inLanguage":"en","datePublished":"2023-10-31T14:07:43+09:00","dateModified":"2023-10-31T14:07:43+09:00","author":{"@type":"Person","name":"HyoSeung Jeon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://HyoseungJeon.github.io/posts/jquery/ztree/"},"publisher":{"@type":"Organization","name":"HyoSeung IT blog","logo":{"@type":"ImageObject","url":"https://HyoseungJeon.github.io/profile.png"}}}</script><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/main.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://HyoseungJeon.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://HyoseungJeon.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://HyoseungJeon.github.io/posts/ title=posts class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>posts</span></a></li><li><a href=https://HyoseungJeon.github.io/tags/ title=tags class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>tags</span></a></li><li><a href=https://HyoseungJeon.github.io/archives/ title=archives class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>archives</span></a></li><li><a href=https://HyoseungJeon.github.io/search/ title="search (Alt + /)" class=btn-12 accesskey=/><span style=font-family:SUITE-Regular;font-size:19px>search</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://HyoseungJeon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/jquery/>JQuery</a></div><h1 class=post-title>ZTree</h1><div class=post-meta><span title='2023-10-31 14:07:43 +0900 +0900'>October 31, 2023</span>&nbsp;·&nbsp;875 words&nbsp;·&nbsp;HyoSeung Jeon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner style=padding-top:10px><ul><li><a href=#z-tree aria-label="Z Tree">Z Tree</a><ul><li><a href=#%ec%a0%95%ec%9d%98 aria-label=정의>정의</a></li><li><a href=#%ec%84%b8%eb%b6%80-%ea%b8%b0%eb%8a%a5 aria-label="세부 기능">세부 기능</a></li></ul></li><li><a href=#%ec%98%88%ec%a0%9c aria-label=예제>예제</a><ul><li><a href=#demo aria-label=DEMO>DEMO</a></li><li><a href=#%eb%82%b4-%ec%86%8c%ec%8a%a4 aria-label="내 소스">내 소스</a></li></ul></li><li><a href=#%eb%82%b4-%ec%83%9d%ea%b0%81 aria-label="내 생각">내 생각</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?(document.getElementById("toc-container").classList.add("wide"),document.getElementById("menu-container").style.display=""):(document.getElementById("toc-container").classList.remove("wide"),document.getElementById("menu-container").style.display="none")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css><link rel=stylesheet href=https://unpkg.com/css-pro-layout@1.1.0/dist/css/css-pro-layout.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"><script src=https://unpkg.com/@popperjs/core@2></script><div id=menu-container class="layout toc-container wide-r"><aside id=sidebar class="sidebar break-point-sm has-bg-image" style=width:100%><div class=sidebar-layout><div class=sidebar-content><nav class="menu open-current-submenu"><ul><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>API</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/api/fcm/><span class=menu-title>• FCM</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D/><span class=menu-title>• Nice 본인인증</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%91/><span class=menu-title>• Nice본인인증 이슈대응</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%912/><span class=menu-title>• Nice본인인증이슈대응2</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Chrome</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/chrome/debug/><span class=menu-title>• Debug</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Design Patterns</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class="menu-item sub-menu"><a href=#><span class=menu-title>Behavioral Patterns</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/designpattern/behavioral-patterns/strategypattern/><span class=menu-title>• Strategy Pattern</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/designpattern/creational-patterns/><span class=menu-title>• Creational Patterns</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/designpattern/structural-patterns/><span class=menu-title>• Structural Patterns</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Intellij</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/intellij/propertiesautoupper/><span class=menu-title>• Properties Auto Upper</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/intellij/thymeleaf/><span class=menu-title>• Thymeleaf</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Java</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/java/file/><span class=menu-title>• File</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/future/><span class=menu-title>• Future</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/generic/><span class=menu-title>• Generic</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/reflection/><span class=menu-title>• Reflection</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/synchronized/><span class=menu-title>• Synchronized</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Java Script</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/validate/><span class=menu-title>• Custom Validate</span>
<span class=menu-suffix></span></a></li><li class="menu-item sub-menu"><a href=#><span class=menu-title>Date</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/date/setdate/><span class=menu-title>• setDate</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/javascript/pagereloadissue/><span class=menu-title>• Page Reload Issue</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>JQuery</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/jquery/validate/><span class=menu-title>• JQuery Validate</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/jquery/ztree/><span class=menu-title>• ZTree</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Spring</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/spring/async/><span class=menu-title>• Async</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/requestcontextholder/><span class=menu-title>• RequestContextHolder</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/springsecurity/><span class=menu-title>• Spring Security</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>SQL</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/sql/withrecursive/><span class=menu-title>• With Recursive</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Window</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/><span class=menu-title>• Nud 메모리누수</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>독후감</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EB%8F%85%ED%9B%84%EA%B0%90/cleanarchitecture/><span class=menu-title>• Clean Architecture</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>일기장</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EC%9D%BC%EA%B8%B0%EC%9E%A5/23-07-18/><span class=menu-title>• 23.07.18</span>
<span class=menu-suffix></span></a></li></ul></div></li><ul></nav></div></div><div class=sidebar-footer><div class=footer-box><div></div><div style="padding:0 10px"><span style=display:block;margin-bottom:10px>Pro sidebar is also available as a react package</span><div style=margin-bottom:15px><img alt="preview badge" src="https://img.shields.io/github/stars/azouaoui-med/react-pro-sidebar?style=social"></div><div><a href=https://github.com/azouaoui-med/react-pro-sidebar target=_blank>Check it out!</a></div></div></div></div></aside></div><style scoped></style><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/pro-sidebar.css><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition()},!1),window.addEventListener("resize",function(){checkTocPosition()},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("menu-container").style.display="":document.getElementById("menu-container").style.display="none"}</script><div class=post-content><hr><style>#callout{background:#f1f1ef;padding:1.5em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin-bottom:20px;color:var(--hljs-bg)}#callout-inner{margin-left:1em;white-space:pre-line}@media(max-width:767px){#callout{padding:1.5em .75em 1.5em .6em}#callout-inner{margin-left:.5em}}</style><div id=callout><div>💡</div><div id=callout-inner>공통 개발을 하며 개선 건이 생겼다!
기존에 계정의 권한을 관리할 때에 Grid에 뿌려진 Data를 찾아 해당 사용여부를 Y로 업데이트 해야 하는 번거로움이 있었다..!
아마 초기 설계했을 때에는 관리되는 데이터의 수가 적어 그런 것 같은데.. 관리 대상의 수가 6,000건 정도로 늘어나니 제대로 권한 관리하기가 어려웠다!!
하여 해당 자료구조를 Tree 형태로 마이그레이션 하게 됐다!
기존에 사용되던 ZTree Lib를 활용하여 개발하기로 의사결정이 되었다! 한번 해보자..</div></div><h2 id=z-tree>Z Tree<a hidden class=anchor aria-hidden=true href=#z-tree>#</a></h2><h3 id=정의>정의<a hidden class=anchor aria-hidden=true href=#정의>#</a></h3><blockquote><p>zTree is an advanced jQuery &rsquo;tree plug-in&rsquo;. The performance is excellent, it is easy to configurw (with a full set of options), and has many advanced features (that usually only come with paid software).
zTree is open source and uses the MIT license.
출처 - <a href=https://www.treejs.cn/v3/main.php#_zTreeInfo>https://www.treejs.cn/v3/main.php#_zTreeInfo</a></p></blockquote><p>zTree는 jQuery spec을 이용한 tree 자료구조를 노출, 관리하기 위한 plug-in 이다! 유료버전도 있다고 하는데.. 우선 현재 프로젝트에서는 유료버전 라이센스를 사용하지는 않고 오픈 소스 기준으로 작업이 되있는 것 같다!</p><h3 id=세부-기능>세부 기능<a hidden class=anchor aria-hidden=true href=#세부-기능>#</a></h3><ul><li>다양한 브라우저와 호환 가능 (IE, FireFox, Chrome, Opera, Safari)</li><li>JSON Data 지원</li><li>checkBox, radio Btn 기능 지원</li></ul><p>이 외에도 다양한 Custom 기능이나 지연 로딩 등 성능적인 부분에서도 다양한 기능들이 지원된다!</p><h2 id=예제>예제<a hidden class=anchor aria-hidden=true href=#예제>#</a></h2><h3 id=demo>DEMO<a hidden class=anchor aria-hidden=true href=#demo>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>HEAD</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>TITLE</span><span class=p>&gt;</span> ZTREE DEMO - Simple Data<span class=p>&lt;/</span><span class=nt>TITLE</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;content-type&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;text/html; charset=UTF-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;../../../css/demo.css&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/css&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;../../../css/zTreeStyle/zTreeStyle.css&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/css&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../../../js/jquery-1.4.4.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../../../js/jquery.ztree.core-3.5.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>SCRIPT</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=c>&lt;!--</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>setting</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>simpleData</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>enable</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>zNodes</span> <span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>0</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 1&#34;</span><span class=p>,</span> <span class=nx>open</span><span class=o>:</span><span class=kc>true</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>11</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 11&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>111</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>11</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 111&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>112</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>11</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 112&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>113</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>11</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 113&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>114</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>11</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 114&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 12&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>121</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 121&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>122</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 122&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>123</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 123&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>124</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>12</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 124&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>13</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>1</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 13 - no child&#34;</span><span class=p>,</span> <span class=nx>isParent</span><span class=o>:</span><span class=kc>true</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>2</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>0</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 2&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>21</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>2</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;pNode 21&#34;</span><span class=p>,</span> <span class=nx>open</span><span class=o>:</span><span class=kc>true</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>211</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>21</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 211&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>212</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>21</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 212&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>213</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>21</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 213&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>			<span class=p>{</span> <span class=nx>id</span><span class=o>:</span><span class=mi>214</span><span class=p>,</span> <span class=nx>pId</span><span class=o>:</span><span class=mi>21</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span><span class=s2>&#34;leaf node 214&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=nx>$</span><span class=p>(</span><span class=nb>document</span><span class=p>).</span><span class=nx>ready</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>			<span class=nx>$</span><span class=p>.</span><span class=nx>fn</span><span class=p>.</span><span class=nx>zTree</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=nx>$</span><span class=p>(</span><span class=s2>&#34;#treeDemo&#34;</span><span class=p>),</span> <span class=nx>setting</span><span class=p>,</span> <span class=nx>zNodes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>});</span>
</span></span><span class=line><span class=cl>		<span class=c1>//--&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=p>&lt;/</span><span class=nt>SCRIPT</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;/</span><span class=nt>HEAD</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>BODY</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Simple JSON Data<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h6</span><span class=p>&gt;</span>[ File Path: core/simpleData.html ]<span class=p>&lt;/</span><span class=nt>h6</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;content_wrap&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;zTreeDemoBackground left&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=p>&lt;</span><span class=nt>ul</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;treeDemo&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;ztree&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>사용법은 간단하다. JQuery, z-tree Lib를 import 해주고 ztree field에 mapping에 init 후 여러가지 custom 방식들을 활용하여 나만의 zTree를 구성하면 된다!</p><p>자세한 기능들은 <a href=https://www.treejs.cn/v3/demo.php#_101>https://www.treejs.cn/v3/demo.php#_101</a> Demo Guide site를 참고하면 된다. 대부분 tree 구조에서 활용되는 case들이 많이 있다! 따로 유료 버전을 사용하지 않아도 충분히 제 기능을 다 한다.</p><h3 id=내-소스>내 소스<a hidden class=anchor aria-hidden=true href=#내-소스>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>simpleData</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>enable</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>idKey</span><span class=o>:</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>pIdKey</span><span class=o>:</span> <span class=s1>&#39;pId&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>rootPId</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>lvl</span><span class=o>:</span> <span class=s1>&#39;lvl&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>caloUrl</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>menuId</span><span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>=====</span> <span class=nx>생략</span> <span class=o>=====</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>iconSkin</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>testCd</span> <span class=o>===</span> <span class=s1>&#39;20&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>iconSkin</span> <span class=o>=</span> <span class=s1>&#39;ico_docu &#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>========</span> <span class=nx>생략</span> <span class=o>======</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nx>key</span><span class=p>.</span><span class=nx>keyCode</span> <span class=o>===</span> <span class=mi>13</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>treeObj</span> <span class=o>=</span> <span class=nx>$</span><span class=p>.</span><span class=nx>fn</span><span class=p>.</span><span class=nx>zTree</span><span class=p>.</span><span class=nx>getZTreeObj</span><span class=p>(</span><span class=s2>&#34;tree&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>text</span> <span class=o>=</span> <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#snb_treebox-search-input-field&#39;</span><span class=p>).</span><span class=nx>val</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>treeObj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;업무그룹코드를 선택해주세요.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nx>text</span><span class=p>){</span>
</span></span><span class=line><span class=cl>          <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;검색어를 입력해주세요.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=cm>/* 1. 원본 검색어가 없거나, 새로운 검색어일 경우 */</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>orgSchText</span> <span class=o>||</span> <span class=nx>orgSchText</span> <span class=o>!==</span> <span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>orgSchText</span> <span class=o>=</span> <span class=nx>text</span>
</span></span><span class=line><span class=cl>          <span class=nx>reSchFlag</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>reSchFlag</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* 2. Node List 검색 */</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>reSchFlag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>schMenuIndex</span> <span class=o>=</span> <span class=nx>schMenuIndex</span> <span class=o>&lt;</span> <span class=nx>schMenuList</span><span class=p>.</span><span class=nx>length</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>?</span> <span class=nx>schMenuIndex</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>schMenuIndex</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=cm>/* 2.1 List setting */</span>
</span></span><span class=line><span class=cl>          <span class=nx>schMenuList</span> <span class=o>=</span> <span class=nx>treeObj</span><span class=p>.</span><span class=nx>getNodesByFilter</span><span class=p>(</span><span class=nx>node</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>node</span><span class=p>.</span><span class=nx>name</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=cm>/* 3. 현재 index Node 노출 */</span>
</span></span><span class=line><span class=cl>        <span class=nx>treeObj</span><span class=p>.</span><span class=nx>selectNode</span><span class=p>(</span><span class=nx>schMenuList</span><span class=p>[</span><span class=nx>schMenuIndex</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>======</span> <span class=nx>생략</span> <span class=o>=====</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>checked</span><span class=o>:</span> <span class=nx>useYn</span> <span class=o>===</span> <span class=s2>&#34;Y&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>checkedOld</span><span class=o>:</span> <span class=nx>useYn</span> <span class=o>===</span> <span class=s2>&#34;Y&#34;</span><span class=p>,</span>
</span></span></code></pre></div><p>사실 특별히 추가한 코드는 없다! 그래도 한번 짚어갈 부분을 확인해보자!</p><ul><li>기본적으로 Node 객체를 활용하여 tree를 구성하게 된다! 하여 node에 내부 Data를 Custom하고 해당 속성 값들을 활용하여 목적에 맞게 Tree를 구성할 수 있다는 것이 큰 장점이다!</li><li>보일 지 모르겠지만 iconSkin 값을 <code>'ico_docu '</code> 띄어쓰기를 포함해 넣었다! 왜냐하면 기본적인 zTree 동작으로 leaf Node들은 iconSkin 값을 그대로 class에 선언하여 사용하지만 그 외 Node들은 해당 값을 prefix 방식으로 적용하여 open, close suffix를 붙여 class를 적용한다! 하여 만약 사용자가 open, close 형태의 icon이 아닌 정적인 형태의 icon을 활용 할 경우에는 애매했다! 하여 class가 선언되는 방식을 이용, space 공간을 추가하여 class를 분리하고 의도한 skin이 나오도록 설정하였다!</li><li>Tree에 검색 기능을 추가 했는데, 여러 건이 검색 될 경우 List에 검색 결과 Node들을 담고 차례대로 순환 구조로 select 되게 구현하였다!</li><li>zTree는 단순하게 Lib 하나를 더 loading 것 만으로도 CheckBox Custom이 가능했다! check 값들을 계산하거나, level 단의 checkBox 동작 같은 경우에도 간단하게 구현되었다. 너무 편하네..</li></ul><h2 id=내-생각>내 생각<a hidden class=anchor aria-hidden=true href=#내-생각>#</a></h2><p>오픈 소스 라이브러리 임에도 불구하고 굉장히 탄탄하게 구현이 되있는 것 같았다! Grid 관련한 라이브러리는 유료, 무료 모두 사용해보았지만, 유료 임에도 불친절하고 기본적인 기능도 구현되있지 않은 것들도 있었고, 무료임에도 세세한 기능과 유연한 Custom 기능까지 있는 것이 있었다! Tree 구조 관련한 Lib는 이번에 처음 사용해보았는데 첫 경험은 아주 좋았던 것 같다!! 무언가 이런 기능은 있겠지..? 하고 Docs를 살펴보면 대부분의 기능이 있었다!! 뭐 당연할 수도 있지만.. 불친절한 Lib를 사용했던 경험이 많다 보니 더 그렇게 느껴진 것 같기도 하다! 그래도 해당 lib가 굉장히 친절하고 Docs도 잘 나와 있다고 느꼈다!</p><p>오히려 이번엔 해당 tree를 뿌리기 위해 Query를 개선 했던 것이 더 기억에 남는다..! 나중에 Posting을 할 수도 있겠지만, Query vs Java에 문제는 항상 나를 고민하게 만드는 것 같다.. 기존 menu 권한을 조회하는 Query는 시간이 5초 가량 걸리고 있었다.. 하지만 여러 Table이 엮여있고, 또 기존에 사용되던 것이 있어 함부로 개선하기도 조금 무서웠다.. 하여 조건 만 추가하여 기존 소스를 살렸다! 나중에 zTree에서 Lazy loading 기능을 활용하여.. 화면 속도를 더 개선하는 방향으로 조금 작업 해봐야겠다.. 생각보다 일이 잘 풀려서 놀랐던 ZTree에게 감사를..!!😁😁👍</p><p>출처</p><p><a href=https://www.treejs.cn/v3/main.php#_zTreeInfo>Home [zTree &ndash; jQuery tree plug-ins.]</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://HyoseungJeon.github.io/tags/javascript/>JavaScript</a></li><li><a href=https://HyoseungJeon.github.io/tags/jquery/>jQuery</a></li><li><a href=https://HyoseungJeon.github.io/tags/data-structure/>Data Structure</a></li></ul><nav class=paginav><a class=prev href=https://HyoseungJeon.github.io/posts/sql/withrecursive/><span class=title>« Prev</span><br><span>With Recursive</span></a>
<a class=next href=https://HyoseungJeon.github.io/posts/%EB%8F%85%ED%9B%84%EA%B0%90/cleanarchitecture/><span class=title>Next »</span><br><span>Clean Architecture</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://HyoseungJeon.github.io/>HyoSeung IT blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>