<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Async | HyoSeung IT blog</title><meta name=keywords content="Spring,Annotation,Asynchronous"><meta name=description content="알게된 계기 이전 포스팅에서 Java의 Future 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 Future 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다."><meta name=author content="HyoSeung Jeon"><link rel=canonical href=https://HyoseungJeon.github.io/posts/spring/async/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://HyoseungJeon.github.io/profile.png><link rel=icon type=image/png sizes=16x16 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><script defer crossorigin=anonymous src=/js/pro.sidebar.js></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Async"><meta property="og:description" content="알게된 계기 이전 포스팅에서 Java의 Future 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 Future 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다."><meta property="og:type" content="article"><meta property="og:url" content="https://HyoseungJeon.github.io/posts/spring/async/"><meta property="og:image" content="https://HyoseungJeon.github.io/profile2.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-20T11:07:59+09:00"><meta property="article:modified_time" content="2023-07-20T11:07:59+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://HyoseungJeon.github.io/profile2.png"><meta name=twitter:title content="Async"><meta name=twitter:description content="알게된 계기 이전 포스팅에서 Java의 Future 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 Future 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://HyoseungJeon.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Spring","item":"https://HyoseungJeon.github.io/posts/spring/"},{"@type":"ListItem","position":3,"name":"Async","item":"https://HyoseungJeon.github.io/posts/spring/async/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Async","name":"Async","description":"알게된 계기 이전 포스팅에서 Java의 Future 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 Future 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다.","keywords":["Spring","Annotation","Asynchronous"],"articleBody":" 알게된 계기 이전 포스팅에서 Java의 Future 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 Future 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다.\n@Async란? Async는 Spring 에서 제공하는 비동기 method 지원 annotation 으로 Java의 Thread pool을 이용하여 해당하는 method 병렬 처리를 가능하게 한다.\n기존의 Java Exceutor를 사용한 병렬 처리 구현 방법보다 간편하고, annotation을 통해서 쉽게 사용할 수 있다는 장점이 있다. 하지만 Spring의 AOP 방식을 이용하여 구현된 기능으로 그 한계가 같다는 점이 있다.\n사용 방법 기본 사용 방법은 Spring Application class에 @EnableAsync를 달아 Async 기능 사용을 열어주고, 비동기로 사용할 method에 @Async annotation을 달아주면 끝이다.\n하지만 이는 SimpleAsyncTaskExecutor를 사용하게 됨으로 Thread를 따로 관리할 수는 없고 단순히 생성만 하여 사용하게 된다.\n@EnableAsync @SpringBootApplication public class DemoApplication {public static void main(String[] args) { SpringApplication.run(DemoApplication.class, args); } /* ============================================== */ @Service @RequiredArgsConstructor public class TestService { @Async(\"sampleExecutor\") public void testAsync(String message){ for(int i = 1; i \u003c= 3; i++){ System.out.println(message + \"비동기 : \" + i); } } } 때문에 실제로는 Custom Thread Pool을 생성하여 관리를 하게 한다.\n@Configuration @EnableAsync public class AsyncConfig { private int CORE_POOL_SIZE = 3; private int MAX_POOL_SIZE = 10; private int QUEUE_CAPACITY = 100_000; @Bean(name = \"sampleExecutor\") public Executor threadPoolTaskExecutor(){ ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor(); taskExecutor.setCorePoolSize( CORE_POOL_SIZE ); taskExecutor.setMaxPoolSize( MAX_POOL_SIZE ); taskExecutor.setQueueCapacity( QUEUE_CAPACITY ); taskExecutor.setTaskDecorator( new CustomDecorator() ); // 데코레이터 적용 taskExecutor.setThreadNamePrefix( \"Executor-\" ); taskExecutor.setRejectedExecutionHandler( new ThreadPoolExecutor.CallerRunsPolicy() ); return taskExecutor; } 실제로 Thread Pool 통하여 관리하는 방식으로 사용할 때에는 Application 단의 @EnableAsync annotation을 지우고 Configuration 단에 Spring의 Async을 수행할 Thread Pool 정의 Config Class를 생성한다. 하고 해당 Annotation을 Class에 선언한다.\n후에 실제로 Executor을 생성하여 정의 하게 되는데 그 옵션은 아래와 같다.\nTaskExecutor Options corePoolSize\n기본적으로 활성화 된 thread의 개수 (Defalut : 1)\nmaxPoolSize\nQueue Capacity 이상의 요청이 들어올 경우, Thread Pool에 생성 가능한 최대 Thread 수 (Default : Integer.MAX_VALUE)\nqueueCapacity\nCorePoolSize 이상의 요청이 들어올 경우, Linked Blocking Queue 라는 공간에 task를 대기 시킨다, 해당 Quque 공간의 Capa (Default : MAX_VALUE)\ntaskDecorator\n해당 task를 Thread에 할당하기 전 작업을 Custom 정의할 수 있는 class, decorate method override를 통하여 해당 내용 작성\n→ 위 예제에서는 requestContext 내 정보를 복사\nthreadNamePrefix\n할당된 thread의 Prefix name 정의 (ex : “SAMPLE-SERVICE- “)\nrejectedExecutionHandler\n거부된 작업을 이후 Handling Policy를 정의\nAbortPolicy : 작업이 거부되면 RejectedExecutionException을 던진다. CallerRunsPolicy : Async 메소드를 불렀던 메인 스레드에서 거부된 작업을 실행한다. DiscardOldestPolicy : 큐에서 가장 오래된 task를 제거하고 실행시킨다. DiscardPolicy : Reject된 Task에 대해 어떠한 작업도 진행하지 않는다. 예외처리 thread와 관련하여 capacity 초과로 인한 Error와 같은 Exception 들을 처리 해놓는 부분이 필수적으로 필요하다.\n해당 예외로 인하여 작업이 실행되지 않고, log나 해당 Data 적재도 제대로 되지 않을 경우가 발생할 수 있다.\n@Configuration @EnableAsync public class AsyncConfig implements AsyncConfigurer {// 추가 private int CORE_POOL_SIZE = 3; //~~~~ //override method @Override public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() { return new AsyncExceptionHandler();// 추가 } } @Slf4j public class AsyncExceptionHandler implements AsyncUncaughtExceptionHandler { @Override public void handleUncaughtException(Throwable ex, Method method, Object... params) { log.error( ex.getMessage(), ex ); } } Config class에 AsyncConfigurer class를 impl, getAsyncUncaughtExceptionHandler 를 정의하여 Exception Handler를 작성한다.\n위와 같은 Handler를 따로 정의하여 관리하는 방법이 효과적일 것 같다.\nCheckPoint 접근 제한자는 public만 가능하다.\n본 기능은 Spring AOP에 의해 구현되어 Proxy 객체를 기반으로 수행 됨으로 접근 권한이 public 하여야 한다.\n자가 호출 형태는 적용되지 않는다.\n실제로 error를 터트리진 않지만 할당한 ThreadPool 통해 병렬 처리 되진 않는다.\n이도 역시 AOP 때문이다.\nrequest Context 사용이 불가능 하다.\n새로운 Thread를 생성하기 때문에 기존 request 정보가 포함된 Context는 존재하지 않는다. 때문에 필요하다면 taskDecorator 를 통한 context copy 과정이 필요하다.\nException\n새로운 Thread 임으로 호출한 thread 까지 Exception이 전달되지 않는다. 하지만 return 값이 존재하는 형태라면 별도로 처리가 가능하다.\n느낀점 Java의 병렬 programing 관련하여 여러가지 방식들을 보게 되었는데 확실히 Spring이 상대적으로 복잡했던 Thread Pool 관련한 병렬 프로그래밍 방식들을 쉽게 처리할 수 있게 구현해 놓은 것 같다. 상대적으로 복잡한 설계가 필요 없었고 Config, annotataion 두개의 source로 실제 프로젝트에 굉장히 쉽게 병렬 처리를 적용했다. 실제로 해당 단위의 처리 시간이 16초에서 6초 가량으로 많이 줄었다. 다음 번엔 함께 사용했던 CompletableFuture 관련한 글을 쓰겠다!\n출처:\nAsync (Spring Framework 6.0.11 API)\n[Spring] @Async 비동기 멀티스레드 사용법\n","wordCount":"693","inLanguage":"en","datePublished":"2023-07-20T11:07:59+09:00","dateModified":"2023-07-20T11:07:59+09:00","author":{"@type":"Person","name":"HyoSeung Jeon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://HyoseungJeon.github.io/posts/spring/async/"},"publisher":{"@type":"Organization","name":"HyoSeung IT blog","logo":{"@type":"ImageObject","url":"https://HyoseungJeon.github.io/profile.png"}}}</script><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/main.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://HyoseungJeon.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://HyoseungJeon.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://HyoseungJeon.github.io/posts/ title=posts class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>posts</span></a></li><li><a href=https://HyoseungJeon.github.io/tags/ title=tags class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>tags</span></a></li><li><a href=https://HyoseungJeon.github.io/archives/ title=archives class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>archives</span></a></li><li><a href=https://HyoseungJeon.github.io/search/ title="search (Alt + /)" class=btn-12 accesskey=/><span style=font-family:SUITE-Regular;font-size:19px>search</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://HyoseungJeon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/spring/>Spring</a></div><h1 class=post-title>Async</h1><div class=post-meta><span title='2023-07-20 11:07:59 +0900 +0900'>July 20, 2023</span>&nbsp;·&nbsp;693 words&nbsp;·&nbsp;HyoSeung Jeon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner style=padding-top:10px><ul><li><a href=#%ec%95%8c%ea%b2%8c%eb%90%9c-%ea%b3%84%ea%b8%b0 aria-label="알게된 계기">알게된 계기</a></li><li><a href=#async%eb%9e%80 aria-label=@Async란?>@Async란?</a></li><li><a href=#%ec%82%ac%ec%9a%a9-%eb%b0%a9%eb%b2%95 aria-label="사용 방법">사용 방법</a><ul><li><a href=#taskexecutor-options aria-label="TaskExecutor Options">TaskExecutor Options</a></li><li><a href=#%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac aria-label=예외처리>예외처리</a></li><li><a href=#checkpoint aria-label=CheckPoint>CheckPoint</a></li></ul></li><li><a href=#%eb%8a%90%eb%82%80%ec%a0%90 aria-label=느낀점>느낀점</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?(document.getElementById("toc-container").classList.add("wide"),document.getElementById("menu-container").style.display=""):(document.getElementById("toc-container").classList.remove("wide"),document.getElementById("menu-container").style.display="none")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css><link rel=stylesheet href=https://unpkg.com/css-pro-layout@1.1.0/dist/css/css-pro-layout.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"><script src=https://unpkg.com/@popperjs/core@2></script><div id=menu-container class="layout toc-container wide-r"><aside id=sidebar class="sidebar break-point-sm has-bg-image" style=width:100%;position:sticky;top:var(--gap)><div class=sidebar-layout><div class=sidebar-content><nav class="menu open-current-submenu"><ul><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>API
<span class=menu-title-suffix>(4)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/api/fcm/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>FCM</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Nice 본인인증</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%91/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Nice본인인증 이슈대응</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%912/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Nice본인인증이슈대응2</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Chrome
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/chrome/debug/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Debug</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Design Patterns
<span class=menu-title-suffix>(3)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Behavioral Patterns
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/designpattern/behavioral-patterns/strategypattern/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Strategy Pattern</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/designpattern/creational-patterns/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Creational Patterns</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/designpattern/structural-patterns/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Structural Patterns</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>ETC
<span class=menu-title-suffix>(3)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/etc/msaidauditing/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>MSA Id Auditing</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/etc/msa-%ED%99%98%EA%B2%BD-traceid-logging/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>MSA 환경 TraceId Logging</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/etc/oauth/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>OAuth</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Intellij
<span class=menu-title-suffix>(2)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/intellij/propertiesautoupper/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Properties Auto Upper</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/intellij/thymeleaf/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Thymeleaf</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Java
<span class=menu-title-suffix>(7)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/java/cursor/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Cursor</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/file/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>File</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/function-package/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Function Package</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/future/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Future</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/generic/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Generic</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/reflection/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Reflection</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/synchronized/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Synchronized</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Java Script
<span class=menu-title-suffix>(3)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/validate/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Custom Validate</span>
<span class=menu-suffix></span></a></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Date
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/date/setdate/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>setDate</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/javascript/pagereloadissue/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Page Reload Issue</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>JQuery
<span class=menu-title-suffix>(2)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/jquery/validate/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>JQuery Validate</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/jquery/ztree/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>ZTree</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Spring
<span class=menu-title-suffix>(4)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/spring/async/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Async</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/requestcontextholder/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>RequestContextHolder</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/scope/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Scope</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/springsecurity/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Spring Security</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>SQL
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/sql/withrecursive/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>With Recursive</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>Window
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Nud 메모리누수</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>독후감
<span class=menu-title-suffix>(2)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EB%8F%85%ED%9B%84%EA%B0%90/cleanarchitecture/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>Clean Architecture</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/%EB%8F%85%ED%9B%84%EA%B0%90/%ED%95%A8%EC%88%98%ED%98%95%EC%BD%94%EB%94%A9/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>쏙쏙 들어오는 함수형 코딩</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-book-line></i></span>
<span class=menu-title>일기장
<span class=menu-title-suffix>(1)</span></span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EC%9D%BC%EA%B8%B0%EC%9E%A5/23-07-18/><span class=menu-icon><i class=ri-sticky-note-fill></i></span>
<span class=menu-title>23.07.18</span>
<span class=menu-suffix></span></a></li></ul></div></li><ul></nav></div></div><div class=sidebar-footer><div class=footer-box><div></div><div style="padding:0 10px"><span style=display:block;margin-bottom:10px>Pro sidebar is also available as a react package</span><div style=margin-bottom:15px><img alt="preview badge" src="https://img.shields.io/github/stars/azouaoui-med/react-pro-sidebar?style=social"></div><div><a href=https://github.com/azouaoui-med/react-pro-sidebar target=_blank>Check it out!</a></div></div></div></div></aside></div><style scoped></style><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/pro-sidebar.css><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition()},!1),window.addEventListener("resize",function(){checkTocPosition()},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("menu-container").style.display="":document.getElementById("menu-container").style.display="none"}</script><div class=post-content><hr><h2 id=알게된-계기>알게된 계기<a hidden class=anchor aria-hidden=true href=#알게된-계기>#</a></h2><p>이전 포스팅에서 Java의 <code>Future</code> 관련한 내용을 작성했었다. 그 내용을 요약하면 메일, 문자 발송 시스템의 처리 시간이 너무 불필요하게 길다는 것 이였다. 그 문제의 원인은 결국 blocking 발생 이였다. 하지만 <code>Future</code> 를 통하여 구현된 부분은 request 송신에 공통으로 사용된 부분 이였고 이와 별개로 내부 process Logic내에서 필요 없는 cost를 통해 지연이 발생하였고 하여 이를 병렬 처리하는 것이 필요했다. 하여 내용을 찾아보던 중 Spring에서 비동기 method 기능을 지원한다는 것을 발견하였다.</p><h2 id=async란>@Async란?<a hidden class=anchor aria-hidden=true href=#async란>#</a></h2><p>Async는 Spring 에서 제공하는 비동기 method 지원 annotation 으로 Java의 Thread pool을 이용하여 해당하는 method 병렬 처리를 가능하게 한다.</p><p>기존의 Java Exceutor를 사용한 병렬 처리 구현 방법보다 간편하고, annotation을 통해서 쉽게 사용할 수 있다는 장점이 있다. 하지만 Spring의 AOP 방식을 이용하여 구현된 기능으로 그 한계가 같다는 점이 있다.</p><h2 id=사용-방법>사용 방법<a hidden class=anchor aria-hidden=true href=#사용-방법>#</a></h2><p>기본 사용 방법은 Spring Application class에 @EnableAsync를 달아 Async 기능 사용을 열어주고, 비동기로 사용할 method에 @Async annotation을 달아주면 끝이다.</p><p>하지만 이는 SimpleAsyncTaskExecutor를 사용하게 됨으로 Thread를 따로 관리할 수는 없고 단순히 생성만 하여 사용하게 된다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@EnableAsync</span>
</span></span><span class=line><span class=cl><span class=nd>@SpringBootApplication</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>DemoApplication</span> <span class=o>{</span><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>SpringApplication</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>DemoApplication</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=n>args</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* ============================================== */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Service</span>
</span></span><span class=line><span class=cl><span class=nd>@RequiredArgsConstructor</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>TestService</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Async</span><span class=o>(</span><span class=s>&#34;sampleExecutor&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>testAsync</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>){</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>3</span><span class=o>;</span> <span class=n>i</span><span class=o>++){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>message</span> <span class=o>+</span> <span class=s>&#34;비동기 : &#34;</span> <span class=o>+</span> <span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>때문에 실제로는 Custom Thread Pool을 생성하여 관리를 하게 한다.</p><pre tabindex=0><code>@Configuration
@EnableAsync
public class AsyncConfig {
private int CORE_POOL_SIZE = 3;
private int MAX_POOL_SIZE = 10;
private int QUEUE_CAPACITY = 100_000;

@Bean(name = &#34;sampleExecutor&#34;)
public Executor threadPoolTaskExecutor(){

    ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();

    taskExecutor.setCorePoolSize( CORE_POOL_SIZE );
    taskExecutor.setMaxPoolSize( MAX_POOL_SIZE );
    taskExecutor.setQueueCapacity( QUEUE_CAPACITY );
    taskExecutor.setTaskDecorator( new CustomDecorator() ); // 데코레이터 적용
    taskExecutor.setThreadNamePrefix( &#34;Executor-&#34; );
    taskExecutor.setRejectedExecutionHandler( new ThreadPoolExecutor.CallerRunsPolicy() );

    return taskExecutor;
}
</code></pre><p>실제로 Thread Pool 통하여 관리하는 방식으로 사용할 때에는 Application 단의 @EnableAsync annotation을 지우고 Configuration 단에 Spring의 Async을 수행할 Thread Pool 정의 Config Class를 생성한다. 하고 해당 Annotation을 Class에 선언한다.</p><p>후에 실제로 Executor을 생성하여 정의 하게 되는데 그 옵션은 아래와 같다.</p><h3 id=taskexecutor-options>TaskExecutor Options<a hidden class=anchor aria-hidden=true href=#taskexecutor-options>#</a></h3><ul><li><p><code>corePoolSize</code></p><p>기본적으로 활성화 된 thread의 개수 (Defalut : 1)</p></li><li><p><code>maxPoolSize</code></p><p>Queue Capacity 이상의 요청이 들어올 경우, Thread Pool에 생성 가능한 최대 Thread 수 (Default : Integer.MAX_VALUE)</p></li><li><p><code>queueCapacity</code></p><p>CorePoolSize 이상의 요청이 들어올 경우, Linked Blocking Queue 라는 공간에 task를 대기 시킨다, 해당 Quque 공간의 Capa (Default : MAX_VALUE)</p></li><li><p><code>taskDecorator</code></p><p>해당 task를 Thread에 할당하기 전 작업을 Custom 정의할 수 있는 class, decorate method override를 통하여 해당 내용 작성</p><p>→ 위 예제에서는 requestContext 내 정보를 복사</p></li><li><p><code>threadNamePrefix</code></p><p>할당된 thread의 Prefix name 정의 (ex : “SAMPLE-SERVICE- “)</p></li><li><p><code>rejectedExecutionHandler</code></p><p>거부된 작업을 이후 Handling Policy를 정의</p><ul><li>AbortPolicy : 작업이 거부되면 RejectedExecutionException을 던진다.</li><li>CallerRunsPolicy : Async 메소드를 불렀던 메인 스레드에서 거부된 작업을 실행한다.</li><li>DiscardOldestPolicy : 큐에서 가장 오래된 task를 제거하고 실행시킨다.</li><li>DiscardPolicy : Reject된 Task에 대해 어떠한 작업도 진행하지 않는다.</li></ul></li></ul><h3 id=예외처리>예외처리<a hidden class=anchor aria-hidden=true href=#예외처리>#</a></h3><p>thread와 관련하여 capacity 초과로 인한 Error와 같은 Exception 들을 처리 해놓는 부분이 필수적으로 필요하다.</p><p>해당 예외로 인하여 작업이 실행되지 않고, log나 해당 Data 적재도 제대로 되지 않을 경우가 발생할 수 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span>
</span></span><span class=line><span class=cl><span class=nd>@EnableAsync</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AsyncConfig</span> <span class=kd>implements</span> <span class=n>AsyncConfigurer</span> <span class=o>{</span><span class=c1>// 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=kd>private</span> <span class=kt>int</span> <span class=n>CORE_POOL_SIZE</span> <span class=o>=</span> <span class=mi>3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=c1>//~~~~
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//override method
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>AsyncUncaughtExceptionHandler</span> <span class=nf>getAsyncUncaughtExceptionHandler</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>AsyncExceptionHandler</span><span class=o>();</span><span class=c1>// 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Slf4j</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AsyncExceptionHandler</span> <span class=kd>implements</span> <span class=n>AsyncUncaughtExceptionHandler</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>handleUncaughtException</span><span class=o>(</span><span class=n>Throwable</span> <span class=n>ex</span><span class=o>,</span> <span class=n>Method</span> <span class=n>method</span><span class=o>,</span> <span class=n>Object</span><span class=o>...</span> <span class=n>params</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>log</span><span class=o>.</span><span class=na>error</span><span class=o>(</span> <span class=n>ex</span><span class=o>.</span><span class=na>getMessage</span><span class=o>(),</span> <span class=n>ex</span> <span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Config class에 <code>AsyncConfigurer</code> class를 impl, <code>getAsyncUncaughtExceptionHandler</code> 를 정의하여 Exception Handler를 작성한다.</p><p>위와 같은 Handler를 따로 정의하여 관리하는 방법이 효과적일 것 같다.</p><h3 id=checkpoint>CheckPoint<a hidden class=anchor aria-hidden=true href=#checkpoint>#</a></h3><ul><li><p>접근 제한자는 <strong>public만 가능</strong>하다.</p><p>본 기능은 Spring <strong>AOP</strong>에 의해 구현되어 <strong>Proxy 객체를 기반으로 수행</strong> 됨으로 접근 권한이 public 하여야 한다.</p></li><li><p>자가 호출 형태는 적용되지 않는다.</p><p>실제로 error를 터트리진 않지만 할당한 ThreadPool 통해 병렬 처리 되진 않는다.</p><p>이도 역시 AOP 때문이다.</p></li><li><p>request Context 사용이 불가능 하다.</p><p>새로운 Thread를 생성하기 때문에 기존 request 정보가 포함된 Context는 존재하지 않는다. 때문에 필요하다면 <code>taskDecorator</code> 를 통한 context copy 과정이 필요하다.</p></li><li><p>Exception</p><p>새로운 Thread 임으로 호출한 thread 까지 Exception이 전달되지 않는다. 하지만 return 값이 존재하는 형태라면 별도로 처리가 가능하다.</p></li></ul><h2 id=느낀점>느낀점<a hidden class=anchor aria-hidden=true href=#느낀점>#</a></h2><p>Java의 병렬 programing 관련하여 여러가지 방식들을 보게 되었는데 확실히 Spring이 상대적으로 복잡했던 Thread Pool 관련한 병렬 프로그래밍 방식들을 쉽게 처리할 수 있게 구현해 놓은 것 같다. 상대적으로 복잡한 설계가 필요 없었고 Config, annotataion 두개의 source로 실제 프로젝트에 굉장히 쉽게 병렬 처리를 적용했다. 실제로 해당 단위의 처리 시간이 16초에서 6초 가량으로 많이 줄었다. 다음 번엔 함께 사용했던 <strong><code>CompletableFuture</code></strong> 관련한 글을 쓰겠다!</p><p>출처:</p><p><a href=https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Async.html>Async (Spring Framework 6.0.11 API)</a></p><p>[<a href=https://cano721.tistory.com/208>Spring] @Async 비동기 멀티스레드 사용법</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://HyoseungJeon.github.io/tags/spring/>Spring</a></li><li><a href=https://HyoseungJeon.github.io/tags/annotation/>Annotation</a></li><li><a href=https://HyoseungJeon.github.io/tags/asynchronous/>Asynchronous</a></li></ul><nav class=paginav><a class=prev href=https://HyoseungJeon.github.io/posts/java/generic/><span class=title>« Prev</span><br><span>Generic</span></a>
<a class=next href=https://HyoseungJeon.github.io/posts/%EC%9D%BC%EA%B8%B0%EC%9E%A5/23-07-18/><span class=title>Next »</span><br><span>23.07.18</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://HyoseungJeon.github.io/>HyoSeung IT blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>