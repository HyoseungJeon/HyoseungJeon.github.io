<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FCM | HyoSeung IT blog</title><meta name=keywords content="Java,Spring,Firebase"><meta name=description content="FCMì´ë€? ì •ì˜ Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì¶œì²˜ - https://firebase.google.com/docs/cloud-messaging?hl=ko
ê¸°ëŠ¥ ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”. ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ… ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."><meta name=author content="HyoSeung Jeon"><link rel=canonical href=https://HyoseungJeon.github.io/posts/api/fcm/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://HyoseungJeon.github.io/profile.png><link rel=icon type=image/png sizes=16x16 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="FCM"><meta property="og:description" content="FCMì´ë€? ì •ì˜ Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì¶œì²˜ - https://firebase.google.com/docs/cloud-messaging?hl=ko
ê¸°ëŠ¥ ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”. ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ… ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."><meta property="og:type" content="article"><meta property="og:url" content="https://HyoseungJeon.github.io/posts/api/fcm/"><meta property="og:image" content="https://HyoseungJeon.github.io/profile.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-10T09:45:10+09:00"><meta property="article:modified_time" content="2023-08-10T09:45:10+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://HyoseungJeon.github.io/profile.png"><meta name=twitter:title content="FCM"><meta name=twitter:description content="FCMì´ë€? ì •ì˜ Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì¶œì²˜ - https://firebase.google.com/docs/cloud-messaging?hl=ko
ê¸°ëŠ¥ ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”. ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ… ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://HyoseungJeon.github.io/posts/"},{"@type":"ListItem","position":2,"name":"API","item":"https://HyoseungJeon.github.io/posts/api/"},{"@type":"ListItem","position":3,"name":"FCM","item":"https://HyoseungJeon.github.io/posts/api/fcm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FCM","name":"FCM","description":"FCMì´ë€? ì •ì˜ Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì¶œì²˜ - https://firebase.google.com/docs/cloud-messaging?hl=ko\nê¸°ëŠ¥ ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”. ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ… ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","keywords":["Java","Spring","Firebase"],"articleBody":" FCMì´ë€? ì •ì˜ Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì¶œì²˜ - https://firebase.google.com/docs/cloud-messaging?hl=ko\nê¸°ëŠ¥ ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”. ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ… ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ì›ë¦¬ FCM êµ¬í˜„ì—ëŠ” ì†¡ìˆ˜ì‹ ì„ ìœ„í•œ ë‘ ê°€ì§€ ì£¼ìš” êµ¬ì„±ìš”ì†Œê°€ í¬í•¨ë©ë‹ˆë‹¤.\nFirebaseìš© Cloud Functions ë˜ëŠ” ì•± ì„œë²„ì™€ ê°™ì´ ë©”ì‹œì§€ë¥¼ ì‘ì„±, íƒ€ê²ŸíŒ…, ì „ì†¡í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í™˜ê²½ í•´ë‹¹ í”Œë«í¼ë³„ ì „ì†¡ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” Apple, Android ë˜ëŠ” ì›¹(ìë°”ìŠ¤í¬ë¦½íŠ¸) í´ë¼ì´ì–¸íŠ¸ ì•± Firebase Admin SDKÂ ë˜ëŠ”Â FCM ì„œë²„ í”„ë¡œí† ì½œì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Â ì•Œë¦¼ ì‘ì„±ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ì œê³µë˜ëŠ” ê°•ë ¥í•œ íƒ€ê²ŸíŒ… ë° ë¶„ì„ ê¸°ëŠ¥ì´ë‚˜ ì»¤ìŠ¤í…€Â ê°€ì ¸ì˜¨ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆì¼€íŒ… ë˜ëŠ” ì°¸ì—¬ ë©”ì‹œì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nFCMì˜ êµ¬ì„±ìš”ì†Œì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ê³¼ ì¤‘ìš”í•œ ì •ë³´ëŠ”Â ì•„í‚¤í…ì²˜ ê°œìš”ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.\nì¦‰, ë¬´ë£Œë¡œ Server ë‹¨ì—ì„œ FCM Serverë¥¼ í†µí•´ì—¬ ì •í•´ì§„ ê·œì•½ì— ë”°ë¼ ì‚¬ìš©ì í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ëŠ” ì„œë¹„ìŠ¤ì´ë‹¤!\nì‚¬ìš©ë²• FirebaseApp firebaseApp; ClassPathResource filePath = new ClassPathResource(pushFirebaseProperties.getFileName()); FirebaseOptions options = FirebaseOptions.builder() .setCredentials(GoogleCredentials.fromStream(filePath.getInputStream())) .build(); firebaseApp = FirebaseApp.initializeApp(options); FirebaseMessaging FirebaseMessagingInstance = FirebaseMessaging.getInstance(firebaseApp); // ë©”ì‹œì§€ ì„¤ì • Notification notification = Notification.builder() .build(); MulticastMessage message = MulticastMessage .builder() .setNotification(notification) .build(); // ë©”ì‹œì§€ ì „ì†¡ BatchResponse response = FirebaseMessagingInstance.sendMulticast(message); ì‚¬ìš©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. ë°œê¸‰ ë°›ì€ Firebase ì¸ì¦ ì •ë³´ Fileì„ ì½ê³  App ê°ì²´ë¥¼ ìƒì„±, FirebaseMessaging\nInstanceë¥¼ ìƒì„±í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ì„¤ì • í›„ì— send í•˜ë©´ ëì´ë‹¤!\në‹¨, ë‚´ë¶€ sourceë¥¼ ê³µê°œí•˜ê¸°ëŠ” ì–´ë µì§€ë§Œ êµ¬ì¡°ëŠ” ì´ëŸ¬í•˜ë‹¤.\nSpring Daemon Serverë¡œ êµ¬ì„± ì•Œë¦¼ ë“±ë¡ ì‹œ, ì•Œë¦¼ ëŒ€ê¸° ëª©ë¡ table insert Daemon serverëŠ” 5ì´ˆ ê°„ê²©ìœ¼ë¡œ table read ì¡°íšŒ ëœ row ìˆì„ ì‹œ ë³‘ë ¬ ì²˜ë¦¬ Threadì— ì‘ì—… í• ë‹¹ ì•Œë¦¼ ë°œì†¡ ë³‘ë ¬ ì²˜ë¦¬ (FCM ë°œì†¡) ì„±ê³µ/ì‹¤íŒ¨ Log table insert ì²˜ìŒ ì¸ìˆ˜ì¸ê³„ë¥¼ ë°›ê³  Daemon serverë¡œ êµ¬í˜„ëœ ë°©ì‹ì´ ì‹ ê¸°í–ˆë‹¤! Spring batchê°€ ì•„ë‹Œ ì˜¤ëœë§Œì— ë³´ëŠ” Daemon server.. ì¢€ ë‘ë ¤ì› ë‹¤;;\nì•Œë¦¼ì€ í¬ê²Œ ë‹¨ ê±´, ë‹¤ ê±´ ë‘ ì¢…ë¥˜ë¡œ ì²˜ë¦¬í•˜ê³  ìˆì—ˆë‹¤! ê·¸ë˜ì„œ ë‹¹ì—°íˆ ë‹¨ ê±´ì€ Controller APIë¡œ ë°›ì•„ì„œ ì¦‰ì‹œ ì²˜ë¦¬í•  ì¤„ ì•Œì•˜ëŠ”ë° ë‘ ì¢…ë¥˜ ëª¨ë‘ Daemon Serverê°€ ê° caseì˜ Tableì„ ì½ê³  ì²˜ë¦¬í•˜ê³  ìˆì—ˆë‹¤..! (ë¬´ìŠ¨ ì˜ë¯¸ì¼ê¹Œ..?) ì–´ì°¨í”¼ 5ì´ˆë§ˆë‹¤ ëŒê¸° ë•Œë¬¸ì— ê±°ì˜ ì‹¤ì‹œê°„ì´ë¼ê³  ë´ë„ ë¬´ë°©í•˜ì§€ë§Œ.. êµ³ì´ Threadë¥¼ í•˜ë‚˜ ë” ìƒì„±í•˜ì—¬ í• ë‹¹ ì‹œí‚¤ëŠ” ì´ìœ ëŠ” ì•„ì§ ë‚©ë“í•˜ì§€ ëª»í–ˆë‹¤.. ğŸ˜’ğŸ˜’\nSpring Daemon Server Run ë°©ì‹ ìì²´ë„ ì¡°ê¸ˆ ì‹ ê¸°í–ˆëŠ”ë°, Scheduling Fileì„ í†µí•´.. ë‹¨ìˆœíˆ Thread 2ê°œë¥¼ run ì‹œí‚¤ê³  í•´ë‹¹ Thread Daemonì´ ê³„ì† ë„ëŠ”? ë°©ì‹ ì´ì˜€ë‹¤!! ì²˜ìŒì— ìœ„ Fileì´ ìˆì–´ì„œ Batchë¡œ êµ¬í˜„ ë˜ì–´ìˆë‚˜..? ë¼ëŠ” ìƒê°ì„ í•˜ì˜€ëŠ”ë° Jobë„ ì—†ê³ .. í•˜ì—¬ ì—„ì²­ í—·ê°ˆë ¸ëŠ”ë° Daemonì´ë€ ê±¸ ì´í•´í•˜ê³  ë°”ë¡œ ë‚©ë“ì´ ê°”ë‹¤!\ní•˜ì—¬ Sizeê°€ 10ê°œ ì”© ì¡íŒ Thread ëŒë©° ì‘ì—…ì„ ì²˜ë¦¬í•˜ê³ , ì•Œë¦¼ì„ ë³´ë‚¸ë‹¤!! Runnable Class ë¥¼ ìƒì† ë°›ì€ Sender, Worker, Manager Context ë“¤ì´ ì‘ì—…ì„ í• ë‹¹ ë°›ì•„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.\në‚´ ìƒê° ìƒê°ë³´ë‹¤ FCMì´ ì œê³µí•˜ëŠ” Serviceê°€ ì¢‹ì•„ì„œ ì‰½ê²Œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ê°€ ìˆì—ˆë‹¤! í•˜ì§€ë§Œ ì—­ì‹œ ê·¸ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ì¼ì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ë´¤ë‹¤..\nPush ì•Œë¦¼ì˜ ì¢…ë¥˜ëŠ” ë‹¨ ê±´, ë‹¤ ê±´ ë‘ ì¢…ë¥˜ì˜€ë‹¤! ë‚´ ìƒê°ì—ëŠ” ë‹¨ ê±´ì€ ë¬¸ì Service ì™€ ê°™ì´ MQë¥¼ ì´ìš©í•˜ì—¬ êµ¬ì„±ì„ í•˜ê³ , ë‹¤ ê±´ì€ Batchë¡œ ì˜ˆì•½ëœ ì‹œê°„ì— Serverê°€ í• ë‹¹ëœ Threadë¥¼ í†µí•´ì„œ ì²˜ë¦¬ë¥¼ í•˜ë©´ ê¹”ë”í•  ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤! í•˜ì§€ë§Œ ë‘˜ ë‹¤ Daemon ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ ë˜ê³  ìˆëŠ” ê²ƒì´ ì¡°ê¸ˆ ë†€ë¼ì› ë‹¤..; ì•„ë‹ˆ ì‚¬ì‹¤ ì¢€ ì´ìƒí•˜ë‹¤ê³  ìƒê°í–ˆë‹¤! í•˜ì§€ë§Œ ê¸°ì¡´ì˜ Project ì†ŒìŠ¤ë¥¼ Referenceë¡œ ì‚¼ì•„ ì‘ì—…ì„ í•œ ê²ƒì´ë¼ ì–´ì©” ìˆ˜ ì—†ì—ˆë‹¤ëŠ” ë§ì„ ë“£ê³  ì–´ëŠ ì •ë„ ë‚©ë“ì„ í•˜ê¸´ í–ˆë‹¤.. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ìƒí™©ë“¤ ë•Œë¬¸ì— ì˜¤ë˜ëœ ê²ƒì´ë“  ê²½í—˜ì„ í•´ë³´ê³  ë˜ ë°°ìš°ê³ ! ë˜ ìƒˆë¡œìš´ ê²ƒì˜ ì¥ì ì„ ì œëŒ€ë¡œ ëŠë‚„ ìˆ˜ ìˆëŠ” ê±° ì•„ë‹ê¹Œ?\nì–¸ì œë‚˜ ê·¸ë ‡ë“¯ ì œê³µë˜ëŠ” APIëŠ” ê¸°ëŠ¥ì¼ ë¿ ê²°êµ­ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì´ ì¤‘ìš”í–ˆë‹¤! íŠ¹íˆ Spring ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  FCM Instant ì£¼ì… ë°©ì‹ì´ static Syn~~ ë°©ì‹ìœ¼ë¡œ ë˜ì–´ ìˆì—ˆë‹¤..! ê·¸ë¦¬ê³  Manager Contextì— í•´ë‹¹ FCMì„ í• ë‹¹, ë‹¤ë¥¸ Contextì—ê²Œ ê³„ì† paramìœ¼ë¡œ ë„˜ê¸°ë©´ì„œ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤;; ë§¤ë²ˆ paramì— ì„ ì–¸, staticìœ¼ë¡œ ì„ ì–¸í•œ ì´ìœ ë„.. ì´í•´ê°€ ê°€ì§€ ì•Šì•˜ë‹¤. í•´ì„œ Config ë‹¨ìœ¼ë¡œ FCM ì´ˆê¸°í™” Sourceì„ ì´ê´€í•˜ê³ , í•´ë‹¹ FCM ê°ì²´ë¥¼ @Beanìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ Single Toneìœ¼ë¡œ ì–´ë””ì„œë‚˜ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì • í•˜ì˜€ë‹¤! ê¸°ì¡´ ServiceëŠ” ì´ë¯¸ ì œê³µë˜ê³  ìˆì–´ì„œ ê±´ë“œë¦´ ìˆ˜ ì—†ì—ˆì§€ë§Œ ì ì–´ë„ ì£¼ì… ë°©ë²•ì´ë¼ë„ ë°”ê¾¸ê³  ì‹¶ì—ˆë‹¤.. ğŸ˜‚ (ë„ˆë¬´ ì‹ ê²½ ì“°ì—¬ì„œ ë„ì €íˆ ë‘˜ ìˆ˜ê°€ ì—†ì—ˆë‹¤..)\nCtrl C + V ëŠ” ì¢‹ë‹¤.. í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì‚¬ê³  ì—†ì´, ìƒê° ì—†ì´ ë¶™ì´ëŠ” ì‘ì—…ì€ ìµœì•…ì´ë¼ê³  ìƒê°í•œë‹¤..! ì´ëŸ° ê¸°íšŒë¥¼ í†µí•´ì„œ ë§ˆìŒì„ í•œë²ˆ ë‹¤ì‹œ ë‹¤ì¡ê²Œ ë˜ì—ˆë‹¤!\nì¶œì²˜:\nhttps://firebase.google.com/docs/cloud-messaging?hl=ko\n","wordCount":"659","inLanguage":"en","datePublished":"2023-08-10T09:45:10+09:00","dateModified":"2023-08-10T09:45:10+09:00","author":{"@type":"Person","name":"HyoSeung Jeon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://HyoseungJeon.github.io/posts/api/fcm/"},"publisher":{"@type":"Organization","name":"HyoSeung IT blog","logo":{"@type":"ImageObject","url":"https://HyoseungJeon.github.io/profile.png"}}}</script><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/main.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://HyoseungJeon.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://HyoseungJeon.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://HyoseungJeon.github.io/posts/ title=posts><span style=font-family:SUITE-Regular;font-size:19px>posts</span></a></li><li><a href=https://HyoseungJeon.github.io/tags/ title=tags><span style=font-family:SUITE-Regular;font-size:19px>tags</span></a></li><li><a href=https://HyoseungJeon.github.io/archives/ title=archives><span style=font-family:SUITE-Regular;font-size:19px>archives</span></a></li><li><a href=https://HyoseungJeon.github.io/search/ title="search (Alt + /)" accesskey=/><span style=font-family:SUITE-Regular;font-size:19px><i class='fa-brands fa-github'></i>search</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://HyoseungJeon.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://HyoseungJeon.github.io/posts/>Posts</a>&nbsp;Â»&nbsp;<a href=https://HyoseungJeon.github.io/posts/api/>API</a></div><h1 class=post-title>FCM</h1><div class=post-meta><span title='2023-08-10 09:45:10 +0900 +0900'>August 10, 2023</span>&nbsp;Â·&nbsp;659 words&nbsp;Â·&nbsp;HyoSeung Jeon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner style=padding-top:10px><ul><li><a href=#fcm%ec%9d%b4%eb%9e%80 aria-label=FCMì´ë€?>FCMì´ë€?</a><ul><li><a href=#%ec%a0%95%ec%9d%98 aria-label=ì •ì˜>ì •ì˜</a></li><li><a href=#%ea%b8%b0%eb%8a%a5 aria-label=ê¸°ëŠ¥>ê¸°ëŠ¥</a></li><li><a href=#%ea%b8%b0%eb%b3%b8-%ec%9b%90%eb%a6%ac aria-label="ê¸°ë³¸ ì›ë¦¬">ê¸°ë³¸ ì›ë¦¬</a></li></ul></li><li><a href=#%ec%82%ac%ec%9a%a9%eb%b2%95 aria-label=ì‚¬ìš©ë²•>ì‚¬ìš©ë²•</a></li><li><a href=#%eb%82%b4-%ec%83%9d%ea%b0%81 aria-label="ë‚´ ìƒê°">ë‚´ ìƒê°</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><hr><h2 id=fcmì´ë€>FCMì´ë€?<a hidden class=anchor aria-hidden=true href=#fcmì´ë€>#</a></h2><h3 id=ì •ì˜>ì •ì˜<a hidden class=anchor aria-hidden=true href=#ì •ì˜>#</a></h3><blockquote><p>Firebase Cloud Messaging(FCM)ì€ ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë¬´ë£Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.
ì¶œì²˜ - <a href="https://firebase.google.com/docs/cloud-messaging?hl=ko">https://firebase.google.com/docs/cloud-messaging?hl=ko</a></p></blockquote><h3 id=ê¸°ëŠ¥>ê¸°ëŠ¥<a hidden class=anchor aria-hidden=true href=#ê¸°ëŠ¥>#</a></h3><table><thead><tr><th>ì•Œë¦¼ ë©”ì‹œì§€ ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ ì „ì†¡</th><th>ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ë˜ëŠ” ë°ì´í„° ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ì„ì˜ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€Â https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko#notifications_and_data_messagesì„ ì°¸ì¡°í•˜ì„¸ìš”.</th></tr></thead><tbody><tr><td>ë‹¤ì–‘í•œ ë©”ì‹œì§€ íƒ€ê²ŸíŒ…</td><td>ë‹¨ì¼ ê¸°ê¸°, ê¸°ê¸° ê·¸ë£¹, ì£¼ì œë¥¼ êµ¬ë…í•œ ê¸°ê¸° ë“± 3ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ë©”ì‹œì§€ë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td></tr><tr><td>í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ ë©”ì‹œì§€ ì „ì†¡</td><td>FCMì˜ ì‹ ë¢°ì„± ë†’ê³  ë°°í„°ë¦¬ íš¨ìœ¨ì ì¸ ì—°ê²° ì±„ë„ì„ í†µí•´ ê¸°ê¸°ì—ì„œ ë‹¤ì‹œ ì„œë²„ë¡œ í™•ì¸, ì±„íŒ…, ê¸°íƒ€ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</td></tr></tbody></table><h3 id=ê¸°ë³¸-ì›ë¦¬>ê¸°ë³¸ ì›ë¦¬<a hidden class=anchor aria-hidden=true href=#ê¸°ë³¸-ì›ë¦¬>#</a></h3><p>FCM êµ¬í˜„ì—ëŠ” ì†¡ìˆ˜ì‹ ì„ ìœ„í•œ ë‘ ê°€ì§€ ì£¼ìš” êµ¬ì„±ìš”ì†Œê°€ í¬í•¨ë©ë‹ˆë‹¤.</p><ol><li>Firebaseìš© Cloud Functions ë˜ëŠ” ì•± ì„œë²„ì™€ ê°™ì´ ë©”ì‹œì§€ë¥¼ ì‘ì„±, íƒ€ê²ŸíŒ…, ì „ì†¡í•  ìˆ˜ ìˆëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í™˜ê²½</li><li>í•´ë‹¹ í”Œë«í¼ë³„ ì „ì†¡ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” Apple, Android ë˜ëŠ” ì›¹(ìë°”ìŠ¤í¬ë¦½íŠ¸) í´ë¼ì´ì–¸íŠ¸ ì•±</li></ol><p><a href="https://firebase.google.com/docs/cloud-messaging/server?hl=ko#firebase-admin-sdk-for-fcm">Firebase Admin SDK</a>Â ë˜ëŠ”Â <a href="https://firebase.google.com/docs/cloud-messaging/server?hl=ko#choose">FCM ì„œë²„ í”„ë¡œí† ì½œ</a>ì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Â <a href="https://console.firebase.google.com/project/_/notification?hl=ko">ì•Œë¦¼ ì‘ì„±ê¸°</a>ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ì œê³µë˜ëŠ” ê°•ë ¥í•œ íƒ€ê²ŸíŒ… ë° ë¶„ì„ ê¸°ëŠ¥ì´ë‚˜ ì»¤ìŠ¤í…€Â <a href="https://firebase.google.com/docs/projects/import-segments?hl=ko">ê°€ì ¸ì˜¨ ì„¸ê·¸ë¨¼íŠ¸</a>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆì¼€íŒ… ë˜ëŠ” ì°¸ì—¬ ë©”ì‹œì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>FCMì˜ êµ¬ì„±ìš”ì†Œì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ê³¼ ì¤‘ìš”í•œ ì •ë³´ëŠ”Â <a href="https://firebase.google.com/docs/cloud-messaging/fcm-architecture?hl=ko">ì•„í‚¤í…ì²˜ ê°œìš”</a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</p><p>ì¦‰, <strong>ë¬´ë£Œë¡œ</strong> Server ë‹¨ì—ì„œ FCM Serverë¥¼ í†µí•´ì—¬ ì •í•´ì§„ ê·œì•½ì— ë”°ë¼ ì‚¬ìš©ì <strong>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì„¸ì§€</strong>ë¥¼ ë³´ë‚´ëŠ” ì„œë¹„ìŠ¤ì´ë‹¤!</p><h2 id=ì‚¬ìš©ë²•>ì‚¬ìš©ë²•<a hidden class=anchor aria-hidden=true href=#ì‚¬ìš©ë²•>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>FirebaseApp</span> <span class=n>firebaseApp</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>ClassPathResource</span> <span class=n>filePath</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ClassPathResource</span><span class=o>(</span><span class=n>pushFirebaseProperties</span><span class=o>.</span><span class=na>getFileName</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>FirebaseOptions</span> <span class=n>options</span> <span class=o>=</span> <span class=n>FirebaseOptions</span><span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>setCredentials</span><span class=o>(</span><span class=n>GoogleCredentials</span><span class=o>.</span><span class=na>fromStream</span><span class=o>(</span><span class=n>filePath</span><span class=o>.</span><span class=na>getInputStream</span><span class=o>()))</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>firebaseApp</span> <span class=o>=</span> <span class=n>FirebaseApp</span><span class=o>.</span><span class=na>initializeApp</span><span class=o>(</span><span class=n>options</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>FirebaseMessaging</span> <span class=n>FirebaseMessagingInstance</span> <span class=o>=</span> <span class=n>FirebaseMessaging</span><span class=o>.</span><span class=na>getInstance</span><span class=o>(</span><span class=n>firebaseApp</span><span class=o>);</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl><span class=c1>// ë©”ì‹œì§€ ì„¤ì •
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Notification</span> <span class=n>notification</span> <span class=o>=</span> <span class=n>Notification</span><span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>				<span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=cl>				
</span></span><span class=line><span class=cl><span class=n>MulticastMessage</span>  <span class=n>message</span> <span class=o>=</span> <span class=n>MulticastMessage</span> <span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>				<span class=o>.</span><span class=na>setNotification</span><span class=o>(</span><span class=n>notification</span><span class=o>)</span>
</span></span><span class=line><span class=cl>			  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl><span class=c1>// ë©”ì‹œì§€ ì „ì†¡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>BatchResponse</span> <span class=n>response</span> <span class=o>=</span> <span class=n>FirebaseMessagingInstance</span><span class=o>.</span><span class=na>sendMulticast</span><span class=o>(</span><span class=n>message</span><span class=o>);</span>
</span></span></code></pre></div><p>ì‚¬ìš©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. ë°œê¸‰ ë°›ì€ Firebase ì¸ì¦ ì •ë³´ Fileì„ ì½ê³  App ê°ì²´ë¥¼ ìƒì„±, <code>FirebaseMessaging</code></p><p>Instanceë¥¼ ìƒì„±í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ì„¤ì • í›„ì— send í•˜ë©´ ëì´ë‹¤!</p><p>ë‹¨, ë‚´ë¶€ sourceë¥¼ ê³µê°œí•˜ê¸°ëŠ” ì–´ë µì§€ë§Œ êµ¬ì¡°ëŠ” ì´ëŸ¬í•˜ë‹¤.</p><ol><li>Spring Daemon Serverë¡œ êµ¬ì„±</li><li>ì•Œë¦¼ ë“±ë¡ ì‹œ, ì•Œë¦¼ ëŒ€ê¸° ëª©ë¡ table insert</li><li>Daemon serverëŠ” 5ì´ˆ ê°„ê²©ìœ¼ë¡œ table read</li><li>ì¡°íšŒ ëœ row ìˆì„ ì‹œ ë³‘ë ¬ ì²˜ë¦¬ Threadì— ì‘ì—… í• ë‹¹</li><li>ì•Œë¦¼ ë°œì†¡ ë³‘ë ¬ ì²˜ë¦¬ (FCM ë°œì†¡)</li><li>ì„±ê³µ/ì‹¤íŒ¨ Log table insert</li></ol><p>ì²˜ìŒ ì¸ìˆ˜ì¸ê³„ë¥¼ ë°›ê³  Daemon serverë¡œ êµ¬í˜„ëœ ë°©ì‹ì´ ì‹ ê¸°í–ˆë‹¤! Spring batchê°€ ì•„ë‹Œ ì˜¤ëœë§Œì— ë³´ëŠ” Daemon server.. ì¢€ ë‘ë ¤ì› ë‹¤;;</p><p>ì•Œë¦¼ì€ í¬ê²Œ ë‹¨ ê±´, ë‹¤ ê±´ ë‘ ì¢…ë¥˜ë¡œ ì²˜ë¦¬í•˜ê³  ìˆì—ˆë‹¤! ê·¸ë˜ì„œ ë‹¹ì—°íˆ ë‹¨ ê±´ì€ Controller APIë¡œ ë°›ì•„ì„œ ì¦‰ì‹œ ì²˜ë¦¬í•  ì¤„ ì•Œì•˜ëŠ”ë° ë‘ ì¢…ë¥˜ ëª¨ë‘ Daemon Serverê°€ ê° caseì˜ Tableì„ ì½ê³  ì²˜ë¦¬í•˜ê³  ìˆì—ˆë‹¤..! (ë¬´ìŠ¨ ì˜ë¯¸ì¼ê¹Œ..?) ì–´ì°¨í”¼ 5ì´ˆë§ˆë‹¤ ëŒê¸° ë•Œë¬¸ì— ê±°ì˜ ì‹¤ì‹œê°„ì´ë¼ê³  ë´ë„ ë¬´ë°©í•˜ì§€ë§Œ.. êµ³ì´ Threadë¥¼ í•˜ë‚˜ ë” ìƒì„±í•˜ì—¬ í• ë‹¹ ì‹œí‚¤ëŠ” ì´ìœ ëŠ” ì•„ì§ ë‚©ë“í•˜ì§€ ëª»í–ˆë‹¤.. ğŸ˜’ğŸ˜’</p><p>Spring Daemon Server Run ë°©ì‹ ìì²´ë„ ì¡°ê¸ˆ ì‹ ê¸°í–ˆëŠ”ë°, Scheduling Fileì„ í†µí•´.. ë‹¨ìˆœíˆ Thread 2ê°œë¥¼ run ì‹œí‚¤ê³  í•´ë‹¹ Thread Daemonì´ ê³„ì† ë„ëŠ”? ë°©ì‹ ì´ì˜€ë‹¤!! ì²˜ìŒì— ìœ„ Fileì´ ìˆì–´ì„œ Batchë¡œ êµ¬í˜„ ë˜ì–´ìˆë‚˜..? ë¼ëŠ” ìƒê°ì„ í•˜ì˜€ëŠ”ë° Jobë„ ì—†ê³ .. í•˜ì—¬ ì—„ì²­ í—·ê°ˆë ¸ëŠ”ë° Daemonì´ë€ ê±¸ ì´í•´í•˜ê³  ë°”ë¡œ ë‚©ë“ì´ ê°”ë‹¤!</p><p>í•˜ì—¬ Sizeê°€ 10ê°œ ì”© ì¡íŒ Thread ëŒë©° ì‘ì—…ì„ ì²˜ë¦¬í•˜ê³ , ì•Œë¦¼ì„ ë³´ë‚¸ë‹¤!! <code>Runnable Class</code> ë¥¼ ìƒì† ë°›ì€ <strong>Sender, Worker, Manage</strong>r Context ë“¤ì´ ì‘ì—…ì„ í• ë‹¹ ë°›ì•„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.</p><h2 id=ë‚´-ìƒê°>ë‚´ ìƒê°<a hidden class=anchor aria-hidden=true href=#ë‚´-ìƒê°>#</a></h2><p>ìƒê°ë³´ë‹¤ FCMì´ ì œê³µí•˜ëŠ” Serviceê°€ ì¢‹ì•„ì„œ ì‰½ê²Œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ê°€ ìˆì—ˆë‹¤! í•˜ì§€ë§Œ ì—­ì‹œ ê·¸ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” ì¼ì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ë´¤ë‹¤..</p><p>Push ì•Œë¦¼ì˜ ì¢…ë¥˜ëŠ” ë‹¨ ê±´, ë‹¤ ê±´ ë‘ ì¢…ë¥˜ì˜€ë‹¤! ë‚´ ìƒê°ì—ëŠ” ë‹¨ ê±´ì€ ë¬¸ì Service ì™€ ê°™ì´ MQë¥¼ ì´ìš©í•˜ì—¬ êµ¬ì„±ì„ í•˜ê³ , ë‹¤ ê±´ì€ Batchë¡œ ì˜ˆì•½ëœ ì‹œê°„ì— Serverê°€ í• ë‹¹ëœ Threadë¥¼ í†µí•´ì„œ ì²˜ë¦¬ë¥¼ í•˜ë©´ ê¹”ë”í•  ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤! í•˜ì§€ë§Œ ë‘˜ ë‹¤ Daemon ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ ë˜ê³  ìˆëŠ” ê²ƒì´ ì¡°ê¸ˆ ë†€ë¼ì› ë‹¤..; ì•„ë‹ˆ ì‚¬ì‹¤ ì¢€ ì´ìƒí•˜ë‹¤ê³  ìƒê°í–ˆë‹¤! í•˜ì§€ë§Œ ê¸°ì¡´ì˜ Project ì†ŒìŠ¤ë¥¼ Referenceë¡œ ì‚¼ì•„ ì‘ì—…ì„ í•œ ê²ƒì´ë¼ ì–´ì©” ìˆ˜ ì—†ì—ˆë‹¤ëŠ” ë§ì„ ë“£ê³  ì–´ëŠ ì •ë„ ë‚©ë“ì„ í•˜ê¸´ í–ˆë‹¤.. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ìƒí™©ë“¤ ë•Œë¬¸ì— ì˜¤ë˜ëœ ê²ƒì´ë“  ê²½í—˜ì„ í•´ë³´ê³  ë˜ ë°°ìš°ê³ ! ë˜ ìƒˆë¡œìš´ ê²ƒì˜ ì¥ì ì„ ì œëŒ€ë¡œ ëŠë‚„ ìˆ˜ ìˆëŠ” ê±° ì•„ë‹ê¹Œ?</p><p>ì–¸ì œë‚˜ ê·¸ë ‡ë“¯ ì œê³µë˜ëŠ” APIëŠ” ê¸°ëŠ¥ì¼ ë¿ ê²°êµ­ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì´ ì¤‘ìš”í–ˆë‹¤! íŠ¹íˆ Spring ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  FCM Instant ì£¼ì… ë°©ì‹ì´ static Syn~~ ë°©ì‹ìœ¼ë¡œ ë˜ì–´ ìˆì—ˆë‹¤..! ê·¸ë¦¬ê³  Manager Contextì— í•´ë‹¹ FCMì„ í• ë‹¹, ë‹¤ë¥¸ Contextì—ê²Œ ê³„ì† paramìœ¼ë¡œ ë„˜ê¸°ë©´ì„œ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤;; ë§¤ë²ˆ paramì— ì„ ì–¸, staticìœ¼ë¡œ ì„ ì–¸í•œ ì´ìœ ë„.. ì´í•´ê°€ ê°€ì§€ ì•Šì•˜ë‹¤. í•´ì„œ Config ë‹¨ìœ¼ë¡œ FCM ì´ˆê¸°í™” Sourceì„ ì´ê´€í•˜ê³ , í•´ë‹¹ FCM ê°ì²´ë¥¼ @Beanìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ Single Toneìœ¼ë¡œ ì–´ë””ì„œë‚˜ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì • í•˜ì˜€ë‹¤! ê¸°ì¡´ ServiceëŠ” ì´ë¯¸ ì œê³µë˜ê³  ìˆì–´ì„œ ê±´ë“œë¦´ ìˆ˜ ì—†ì—ˆì§€ë§Œ ì ì–´ë„ ì£¼ì… ë°©ë²•ì´ë¼ë„ ë°”ê¾¸ê³  ì‹¶ì—ˆë‹¤.. ğŸ˜‚ (ë„ˆë¬´ ì‹ ê²½ ì“°ì—¬ì„œ ë„ì €íˆ ë‘˜ ìˆ˜ê°€ ì—†ì—ˆë‹¤..)</p><p>Ctrl C + V ëŠ” ì¢‹ë‹¤.. í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì‚¬ê³  ì—†ì´, ìƒê° ì—†ì´ ë¶™ì´ëŠ” ì‘ì—…ì€ ìµœì•…ì´ë¼ê³  ìƒê°í•œë‹¤..! ì´ëŸ° ê¸°íšŒë¥¼ í†µí•´ì„œ ë§ˆìŒì„ í•œë²ˆ ë‹¤ì‹œ ë‹¤ì¡ê²Œ ë˜ì—ˆë‹¤!</p><p>ì¶œì²˜:</p><p><a href="https://firebase.google.com/docs/cloud-messaging?hl=ko">https://firebase.google.com/docs/cloud-messaging?hl=ko</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://HyoseungJeon.github.io/tags/java/>Java</a></li><li><a href=https://HyoseungJeon.github.io/tags/spring/>Spring</a></li><li><a href=https://HyoseungJeon.github.io/tags/firebase/>Firebase</a></li></ul><nav class=paginav><a class=prev href=https://HyoseungJeon.github.io/posts/jquery/validate/><span class=title>Â« Prev</span><br><span>Validate</span></a>
<a class=next href=https://HyoseungJeon.github.io/posts/java/file/><span class=title>Next Â»</span><br><span>File</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://HyoseungJeon.github.io/>HyoSeung IT blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>