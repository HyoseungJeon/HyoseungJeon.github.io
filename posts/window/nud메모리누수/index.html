<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nud 메모리누수 | HyoSeung IT blog</title><meta name=keywords content="Window,Memory"><meta name=description content="💡 프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다! 근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다.. 해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다! 해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다.. 하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자.. Window NUD NDU란?"><meta name=author content="HyoSeung Jeon"><link rel=canonical href=https://HyoseungJeon.github.io/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://HyoseungJeon.github.io/profile.png><link rel=icon type=image/png sizes=16x16 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://HyoseungJeon.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><script defer crossorigin=anonymous src=/js/pro.sidebar.js></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Nud 메모리누수"><meta property="og:description" content="💡 프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다! 근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다.. 해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다! 해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다.. 하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자.. Window NUD NDU란?"><meta property="og:type" content="article"><meta property="og:url" content="https://HyoseungJeon.github.io/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/"><meta property="og:image" content="https://HyoseungJeon.github.io/profile.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-18T08:34:54+09:00"><meta property="article:modified_time" content="2023-09-18T08:34:54+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://HyoseungJeon.github.io/profile.png"><meta name=twitter:title content="Nud 메모리누수"><meta name=twitter:description content="💡 프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다! 근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다.. 해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다! 해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다.. 하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자.. Window NUD NDU란?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://HyoseungJeon.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Window","item":"https://HyoseungJeon.github.io/posts/window/"},{"@type":"ListItem","position":3,"name":"Nud 메모리누수","item":"https://HyoseungJeon.github.io/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nud 메모리누수","name":"Nud 메모리누수","description":"💡 프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다! 근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다.. 해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다! 해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다.. 하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자.. Window NUD NDU란?","keywords":["Window","Memory"],"articleBody":" 💡 프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다! 근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다.. 해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다! 해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다.. 하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자.. Window NUD NDU란? Network Data Usage Monitoring Driver의 약어로 네트워크의 사용량을 모니터링 하고 그 정보를 관리하는 Window의 기능이다.\n문제 원인 환경 현재 프로젝트에서는 노트북에 보안 환경 세팅이 완료된 Window User를 추가하고 해당 계정으로 Window에 접속하는 방식의 업무 환경을 지원하고 있다! 하여 Network나 문서 관련한 보안 프로그램들이 자동으로 Setting이 되고 Window 계정 권한과 관련된 것들도 자동으로 다 Lock 된 상태로 사용하게 된다.\n원인 분석 Window의 이벤트 뷰어 기능을 사용한 결과 보안 관련한 error가 엄청나게 찍혀있었다..! (매일 매일 많이 로그가 쌓여있었다) 하여 보안 log 저장소의 용량이 혼자서 1000MB 이상으로 비이상적이게 많이 쌓여있었다.. 해당 로그의 내용은 Sensitive Privilege Use 작업으로 사용 프로그램 권한을 검사하다가 나는 error 같은데.. 정확한 내용은 더 디버깅 해보지 못했다! (디버깅 툴 설치 사용이 불가능 했다)\n메모리의 점유 관련한 정보를 작업관리자를 통해 확인하기 어려워 RAMMAP Program을 설치하여 더 추가적인 정보를 확인해보았다! 비페이징 메모리 점유에 관련한 정보를 찾아보니 security 항목으로 비페이징 메모리를 점유하고 있더라..\n결국 문제의 관계는 Window 보안 프로그램의 동작 오류로 인하여 모니터링 혹은 관련 프로그램의 메모리 할당이 해제되지 않고, error 발생 시 마다 kill 되지 않은 메모리가 쌓여서 사용하지 않는 메모리의 점유가 늘어나 발생한 문제 생각했다!\n하여 관련한 내용을 추가적으로 검색해보다가 Window의 NUD issue에 접근했다!!\n해당 Issue를 검색해보니 나와 증상이 똑같이 비페이징 메모리가 지속적으로 쌓이고 점유된 메모리가 사라지지도 않았다. 해당 문제는 Window 8 버전 때 부터 지속적으로 올라오던 문제라고 하더라.. 하지만 일반 PC를 사용할 때에는 전혀 문제가 없었는데 왜 이 환경에서만 발생하였을까?\n난 이 문제를 내부 보안프로그램의 문제점이라고 생각했다. 해당 보안프로그램의 고려 환경은 우리와 같은 외부 Office 환경에서 Setting을 통해 접근하는 환경은 고려하지 않은 대상 같았다. 하여 위와 같은 문제점들이 발생한 것 아닐까..? 일반 사내 Office 환경의 사용자들도 문제를 인식했다면 이런 문제들이 진작에 보고되고 해결되었을텐데.. 전혀 개선이 없는 것 보니 결국 새로운 환경의 사용자에게 발생한 문제로 보였다!\n해결 방법 문제는 굉장히 쉽게 해결되었다.. NUD의 동작을 통해 불필요한 메모리 점유가 발생함으로 해당 기능을 끄는 것으로 문제는 해결되었다..!!\nWindow regedit option에서 NUD 기능을 꺼버리고 재부팅 하니 메모리 점유가 정상으로 돌아왔다..! (오….. 드디어 돌아왔구나….)\nHow? window key + R 로 실행 창 띄움 regedit 입력 후 확인 컴퓨터{localPC}\\SYSTEM\\ControlSet001\\Services\\Ndu 경로 접근 start option “4”로 설정 재부팅 해당 Option 값이 NUD를 끄는 값이라고 하더라.. 위 과정을 거치면 메모리는 돌아온다..!\n내 생각 보안 프로그램의 window 강제 세팅 때문에 Window Defender의 실시간 모니터링 option 프로그램 예외로 intellij를 등록하지 못해서 성능이 매우 느려진다.. 사용하는 프로젝트도 많은데 Load 할 수록 성능이 매우 떨어지더라.. 정말 여러가지로 개발자한테는 최악의 환경인 것 같다.. ㅜ\n아마도 일반 오피스 업무 사용자들은 상관 없을 수 있는 문제들인데 개발자의 환경에는 정말 악독한 상황이라 더 힘든 것 같다.. 다른 프로젝트들에서 겪지 못했던 추가적인 문제들을 마주하니 당황스럽기도 하고 또 스트레스도 나름 받았던 것 같다..\n사실 어떻게 내가 처리할 수 없는 영역이라 기능적인 얘기를 하기는 좀 그렇다! 하지만 업무 환경의 중요성이 새삼 중요하다는 걸 깨달았다..! 또한 window의 단점이 강하게 와닿았다.. 원하지도 않은 기능 때문에 불필요한 memory 점유와 강제 option 설정 등 개발자로 하여금 불편한 요소들을 참 많이 갖고 있구나.. 싶었다!! 덕분에 Mac 환경에 대한 경험이 더 강하게 필요하겠다 라는 생각이 들었다! 내년엔 꼭 사서 사용해봐야지..\n","wordCount":"545","inLanguage":"en","datePublished":"2023-09-18T08:34:54+09:00","dateModified":"2023-09-18T08:34:54+09:00","author":{"@type":"Person","name":"HyoSeung Jeon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://HyoseungJeon.github.io/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/"},"publisher":{"@type":"Organization","name":"HyoSeung IT blog","logo":{"@type":"ImageObject","url":"https://HyoseungJeon.github.io/profile.png"}}}</script><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/main.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://HyoseungJeon.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://HyoseungJeon.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://HyoseungJeon.github.io/posts/ title=posts class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>posts</span></a></li><li><a href=https://HyoseungJeon.github.io/tags/ title=tags class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>tags</span></a></li><li><a href=https://HyoseungJeon.github.io/archives/ title=archives class=btn-12><span style=font-family:SUITE-Regular;font-size:19px>archives</span></a></li><li><a href=https://HyoseungJeon.github.io/search/ title="search (Alt + /)" class=btn-12 accesskey=/><span style=font-family:SUITE-Regular;font-size:19px>search</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://HyoseungJeon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://HyoseungJeon.github.io/posts/window/>Window</a></div><h1 class=post-title>Nud 메모리누수</h1><div class=post-meta><span title='2023-09-18 08:34:54 +0900 +0900'>September 18, 2023</span>&nbsp;·&nbsp;545 words&nbsp;·&nbsp;HyoSeung Jeon</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner style=padding-top:10px><ul><li><a href=#window-nud aria-label="Window NUD">Window NUD</a><ul><li><a href=#ndu%eb%9e%80 aria-label=NDU란?>NDU란?</a></li></ul></li><li><a href=#%eb%ac%b8%ec%a0%9c-%ec%9b%90%ec%9d%b8 aria-label="문제 원인">문제 원인</a><ul><li><a href=#%ed%99%98%ea%b2%bd aria-label=환경>환경</a></li><li><a href=#%ec%9b%90%ec%9d%b8-%eb%b6%84%ec%84%9d aria-label="원인 분석">원인 분석</a></li></ul></li><li><a href=#%ed%95%b4%ea%b2%b0-%eb%b0%a9%eb%b2%95 aria-label="해결 방법">해결 방법</a><ul><li><a href=#how aria-label=How?>How?</a></li></ul></li><li><a href=#%eb%82%b4-%ec%83%9d%ea%b0%81 aria-label="내 생각">내 생각</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?(document.getElementById("toc-container").classList.add("wide"),document.getElementById("menu-container").style.display=""):(document.getElementById("toc-container").classList.remove("wide"),document.getElementById("menu-container").style.display="none")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css><link rel=stylesheet href=https://unpkg.com/css-pro-layout@1.1.0/dist/css/css-pro-layout.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"><script src=https://unpkg.com/@popperjs/core@2></script><div id=menu-container class="layout toc-container wide-r"><aside id=sidebar class="sidebar break-point-sm has-bg-image" style=width:100%><div class=sidebar-layout><div class=sidebar-content><nav class="menu open-current-submenu"><ul><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>API</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/api/fcm/><span class=menu-title>• FCM</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D/><span class=menu-title>• Nice 본인인증</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%91/><span class=menu-title>• Nice본인인증 이슈대응</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%912/><span class=menu-title>• Nice본인인증이슈대응2</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Chrome</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/chrome/debug/><span class=menu-title>• Debug</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Design Patterns</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class="menu-item sub-menu"><a href=#><span class=menu-title>Behavioral Patterns</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/designpattern/behavioral-patterns/strategypattern/><span class=menu-title>• Strategy Pattern</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/designpattern/creational-patterns/><span class=menu-title>• Creational Patterns</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/designpattern/structural-patterns/><span class=menu-title>• Structural Patterns</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Intellij</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/intellij/propertiesautoupper/><span class=menu-title>• Properties Auto Upper</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/intellij/thymeleaf/><span class=menu-title>• Thymeleaf</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Java</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/java/file/><span class=menu-title>• File</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/future/><span class=menu-title>• Future</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/generic/><span class=menu-title>• Generic</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/reflection/><span class=menu-title>• Reflection</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/java/synchronized/><span class=menu-title>• Synchronized</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Java Script</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/validate/><span class=menu-title>• Custom Validate</span>
<span class=menu-suffix></span></a></li><li class="menu-item sub-menu"><a href=#><span class=menu-title>Date</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/javascript/date/setdate/><span class=menu-title>• setDate</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class=menu-item><a href=/posts/javascript/pagereloadissue/><span class=menu-title>• Page Reload Issue</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>JQuery</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/jquery/validate/><span class=menu-title>• JQuery Validate</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/jquery/ztree/><span class=menu-title>• ZTree</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Spring</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/spring/async/><span class=menu-title>• Async</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/requestcontextholder/><span class=menu-title>• RequestContextHolder</span>
<span class=menu-suffix></span></a></li><li class=menu-item><a href=/posts/spring/springsecurity/><span class=menu-title>• Spring Security</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>SQL</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/sql/withrecursive/><span class=menu-title>• With Recursive</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>Window</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/window/nud%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%88%84%EC%88%98/><span class=menu-title>• Nud 메모리누수</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>독후감</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EB%8F%85%ED%9B%84%EA%B0%90/cleanarchitecture/><span class=menu-title>• Clean Architecture</span>
<span class=menu-suffix></span></a></li></ul></div></li><li class="menu-item sub-menu"><a href=#><span class=menu-icon><i class=ri-vip-diamond-fill></i></span>
<span class=menu-title>일기장</span>
<span class=menu-suffix></span></a><div class=sub-menu-list data-popper-placement=left><ul><li class=menu-item><a href=/posts/%EC%9D%BC%EA%B8%B0%EC%9E%A5/23-07-18/><span class=menu-title>• 23.07.18</span>
<span class=menu-suffix></span></a></li></ul></div></li><ul></nav></div></div><div class=sidebar-footer><div class=footer-box><div></div><div style="padding:0 10px"><span style=display:block;margin-bottom:10px>Pro sidebar is also available as a react package</span><div style=margin-bottom:15px><img alt="preview badge" src="https://img.shields.io/github/stars/azouaoui-med/react-pro-sidebar?style=social"></div><div><a href=https://github.com/azouaoui-med/react-pro-sidebar target=_blank>Check it out!</a></div></div></div></div></aside></div><style scoped></style><link rel=stylesheet href=https://HyoseungJeon.github.io/scss/pro-sidebar.css><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition()},!1),window.addEventListener("resize",function(){checkTocPosition()},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("menu-container").style.display="":document.getElementById("menu-container").style.display="none"}</script><div class=post-content><hr><style>#callout{background:#f1f1ef;padding:1.5em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin-bottom:20px;color:var(--hljs-bg)}#callout-inner{margin-left:1em;white-space:pre-line}@media(max-width:767px){#callout{padding:1.5em .75em 1.5em .6em}#callout-inner{margin-left:.5em}}</style><div id=callout><div>💡</div><div id=callout-inner>프로젝트 투입 후 새로운 노트북을 지원 받아 일을 하게 됐다!
근데.. 시간이 지날수록 Intellij의 성능이 매우 느려졌고.. 컴퓨터의 기능이 정지하는 수준까지 가게 되었다..
해서 작업관리자를 먼저 확인해보니 Memory의 점유율이 이상했다.. 노트북은 16GB의 Memory를 갖고 있었는데 실제로 가용한 메모리의 양이 11GB 정도였다!
해서 추가적으로 확인해보니 Memory의 비페이징 풀 이라는 항목이 3.5GB 정도를 점유하고 있었다..
하여 그 문제점을 해결하던 중 window의 NUD 를 발견하게 되었다..! 이 문제를 좀 알아보자..</div></div><h2 id=window-nud>Window NUD<a hidden class=anchor aria-hidden=true href=#window-nud>#</a></h2><h3 id=ndu란>NDU란?<a hidden class=anchor aria-hidden=true href=#ndu란>#</a></h3><p>Network Data Usage Monitoring Driver의 약어로 네트워크의 사용량을 모니터링 하고 그 정보를 관리하는 Window의 기능이다.</p><h2 id=문제-원인>문제 원인<a hidden class=anchor aria-hidden=true href=#문제-원인>#</a></h2><h3 id=환경>환경<a hidden class=anchor aria-hidden=true href=#환경>#</a></h3><p>현재 프로젝트에서는 노트북에 보안 환경 세팅이 완료된 Window User를 추가하고 해당 계정으로 Window에 접속하는 방식의 업무 환경을 지원하고 있다! 하여 Network나 문서 관련한 보안 프로그램들이 자동으로 Setting이 되고 Window 계정 권한과 관련된 것들도 자동으로 다 Lock 된 상태로 사용하게 된다.</p><h3 id=원인-분석>원인 분석<a hidden class=anchor aria-hidden=true href=#원인-분석>#</a></h3><p>Window의 이벤트 뷰어 기능을 사용한 결과 보안 관련한 error가 엄청나게 찍혀있었다..! (매일 매일 많이 로그가 쌓여있었다) 하여 보안 log 저장소의 용량이 혼자서 1000MB 이상으로 비이상적이게 많이 쌓여있었다.. 해당 로그의 내용은 Sensitive Privilege Use 작업으로 사용 프로그램 권한을 검사하다가 나는 error 같은데.. 정확한 내용은 더 디버깅 해보지 못했다! (디버깅 툴 설치 사용이 불가능 했다)</p><p>메모리의 점유 관련한 정보를 작업관리자를 통해 확인하기 어려워 <strong>RAMMAP</strong> Program을 설치하여 더 추가적인 정보를 확인해보았다! 비페이징 메모리 점유에 관련한 정보를 찾아보니 security 항목으로 비페이징 메모리를 점유하고 있더라..</p><p>결국 문제의 관계는 Window 보안 프로그램의 동작 오류로 인하여 모니터링 혹은 관련 프로그램의 메모리 할당이 해제되지 않고, error 발생 시 마다 kill 되지 않은 메모리가 쌓여서 사용하지 않는 메모리의 점유가 늘어나 발생한 문제 생각했다!</p><p>하여 관련한 내용을 추가적으로 검색해보다가 Window의 NUD issue에 접근했다!!</p><p>해당 Issue를 검색해보니 나와 증상이 똑같이 비페이징 메모리가 지속적으로 쌓이고 점유된 메모리가 사라지지도 않았다. 해당 문제는 Window 8 버전 때 부터 지속적으로 올라오던 문제라고 하더라.. 하지만 일반 PC를 사용할 때에는 전혀 문제가 없었는데 왜 이 환경에서만 발생하였을까?</p><p>난 이 문제를 내부 보안프로그램의 문제점이라고 생각했다. 해당 보안프로그램의 고려 환경은 우리와 같은 외부 Office 환경에서 Setting을 통해 접근하는 환경은 고려하지 않은 대상 같았다. 하여 위와 같은 문제점들이 발생한 것 아닐까..? 일반 사내 Office 환경의 사용자들도 문제를 인식했다면 이런 문제들이 진작에 보고되고 해결되었을텐데.. 전혀 개선이 없는 것 보니 결국 새로운 환경의 사용자에게 발생한 문제로 보였다!</p><h2 id=해결-방법>해결 방법<a hidden class=anchor aria-hidden=true href=#해결-방법>#</a></h2><p>문제는 굉장히 쉽게 해결되었다.. NUD의 동작을 통해 불필요한 메모리 점유가 발생함으로 해당 기능을 끄는 것으로 문제는 해결되었다..!!</p><p>Window regedit option에서 NUD 기능을 꺼버리고 재부팅 하니 메모리 점유가 정상으로 돌아왔다..! (오….. 드디어 돌아왔구나….)</p><h3 id=how>How?<a hidden class=anchor aria-hidden=true href=#how>#</a></h3><ol><li>window key + R 로 실행 창 띄움</li><li>regedit 입력 후 확인</li><li>컴퓨터{localPC}\SYSTEM\ControlSet001\Services\Ndu 경로 접근</li><li>start option “4”로 설정</li><li>재부팅</li></ol><p>해당 Option 값이 NUD를 끄는 값이라고 하더라.. 위 과정을 거치면 메모리는 돌아온다..!</p><h2 id=내-생각>내 생각<a hidden class=anchor aria-hidden=true href=#내-생각>#</a></h2><p>보안 프로그램의 window 강제 세팅 때문에 Window Defender의 실시간 모니터링 option 프로그램 예외로 intellij를 등록하지 못해서 성능이 매우 느려진다.. 사용하는 프로젝트도 많은데 Load 할 수록 성능이 매우 떨어지더라.. 정말 여러가지로 개발자한테는 최악의 환경인 것 같다.. ㅜ</p><p>아마도 일반 오피스 업무 사용자들은 상관 없을 수 있는 문제들인데 개발자의 환경에는 정말 악독한 상황이라 더 힘든 것 같다.. 다른 프로젝트들에서 겪지 못했던 추가적인 문제들을 마주하니 당황스럽기도 하고 또 스트레스도 나름 받았던 것 같다..</p><p>사실 어떻게 내가 처리할 수 없는 영역이라 기능적인 얘기를 하기는 좀 그렇다! 하지만 업무 환경의 중요성이 새삼 중요하다는 걸 깨달았다..! 또한 window의 단점이 강하게 와닿았다.. 원하지도 않은 기능 때문에 불필요한 memory 점유와 강제 option 설정 등 개발자로 하여금 불편한 요소들을 참 많이 갖고 있구나.. 싶었다!! 덕분에 Mac 환경에 대한 경험이 더 강하게 필요하겠다 라는 생각이 들었다! 내년엔 꼭 사서 사용해봐야지..</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://HyoseungJeon.github.io/tags/window/>Window</a></li><li><a href=https://HyoseungJeon.github.io/tags/memory/>Memory</a></li></ul><nav class=paginav><a class=prev href=https://HyoseungJeon.github.io/posts/java/synchronized/><span class=title>« Prev</span><br><span>Synchronized</span></a>
<a class=next href=https://HyoseungJeon.github.io/posts/api/nice%EB%B3%B8%EC%9D%B8%EC%9D%B8%EC%A6%9D%EC%9D%B4%EC%8A%88%EB%8C%80%EC%9D%912/><span class=title>Next »</span><br><span>Nice본인인증이슈대응2</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://HyoseungJeon.github.io/>HyoSeung IT blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>